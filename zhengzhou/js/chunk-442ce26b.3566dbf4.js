(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-442ce26b"],{"5cb2":function(e,t,n){"use strict";var a=n("70238"),r=n.n(a);r.a},"6ecc":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=[{EventCode:"DH190001406",EventAddress:"1",UpTime:"2019-07-24T17:46:10",DeptId:1,PersonId:1,PersonName:"admin",cDepName:"管理层",cRoleName:"设备科",EventTypeId:1,EventTypeId2:1,EventTypeName:"困难用水",EventTypeName2:"困难用水",EventFromId:3,EventFromName:"巡检上报",UrgencyId:1,UrgencyName:"一般",DispatchPerson:null,DispatchPersonName:null,EventPictures:"/upload/EventsImg/2019/7/24/2019072417461024.png|/upload/EventsImg/2019/7/24/2019072417461087.png|",EventDesc:"1",EventX:"1",EventY:"1",EventUpdateTime:"2019-07-24T17:46:10",IsValid:1,IsValidName:"正常",Devicesmid:null,DevicesType:null,DeleteStatus:"0",TaskId:-1,Remark_Back:null,OtherSysEventId:null,ExecTime:36,OperId:null,OperName:null,OrderId:null,IsFinish:0,LinkMan:"1",LinkCall:"1",EventStatus:4,StatusName:"正常",ExecPersonId:null,ExecUpDateTime:null,ExecDetpID:null,ExecDetpName:null,ExecPersonName:null,DispatchPersonID:null,DispatchPersonName2:null,DispatchPersonDeptName:null,OperName2:null,OperRemarks:null,DispatchPersonTelePhone:null,LeakPipeCaliber:null,LeakType:null,Pos:1},{EventCode:"DH190001406",EventAddress:"1",UpTime:"2019-07-24T17:46:10",DeptId:1,PersonId:1,PersonName:"admin",cDepName:"管理层",cRoleName:"设备科",EventTypeId:1,EventTypeId2:1,EventTypeName:"困难用水",EventTypeName2:"困难用水",EventFromId:3,EventFromName:"巡检上报",UrgencyId:1,UrgencyName:"一般",DispatchPerson:null,DispatchPersonName:null,EventPictures:"/upload/EventsImg/2019/7/24/2019072417461024.png|/upload/EventsImg/2019/7/24/2019072417461087.png|",EventDesc:"1",EventX:"1",EventY:"1",EventUpdateTime:"2019-07-24T17:46:10",IsValid:1,IsValidName:"正常",Devicesmid:null,DevicesType:null,DeleteStatus:"0",TaskId:-1,Remark_Back:null,OtherSysEventId:null,ExecTime:36,OperId:null,OperName:null,OrderId:null,IsFinish:0,LinkMan:"1",LinkCall:"1",EventStatus:2},{EventCode:"DH190001406",EventAddress:"1",UpTime:"2019-07-24T17:46:10",DeptId:1,PersonId:1,PersonName:"admin",cDepName:"管理层",cRoleName:"设备科",EventTypeId:1,EventTypeId2:1,EventTypeName:"困难用水",EventTypeName2:"困难用水",EventFromId:3,EventFromName:"巡检上报",UrgencyId:1,UrgencyName:"一般",DispatchPerson:null,DispatchPersonName:null,EventPictures:"/upload/EventsImg/2019/7/24/2019072417461024.png|/upload/EventsImg/2019/7/24/2019072417461087.png|",EventDesc:"1",EventX:"1",EventY:"1",EventUpdateTime:"2019-07-24T17:46:10",IsValid:1,IsValidName:"正常",Devicesmid:null,DevicesType:null,DeleteStatus:"0",TaskId:-1,Remark_Back:null,OtherSysEventId:null,ExecTime:36,OperId:null,OperName:null,OrderId:null,IsFinish:0,LinkMan:"1",LinkCall:"1",EventStatus:6},{EventCode:"DH190001406",EventAddress:"1",UpTime:"2019-07-24T17:46:10",DeptId:1,PersonId:1,PersonName:"admin",cDepName:"管理层",cRoleName:"设备科",EventTypeId:1,EventTypeId2:1,EventTypeName:"困难用水",EventTypeName2:"困难用水",EventFromId:3,EventFromName:"巡检上报",UrgencyId:1,UrgencyName:"一般",DispatchPerson:null,DispatchPersonName:null,EventPictures:"/upload/EventsImg/2019/7/24/2019072417461024.png|/upload/EventsImg/2019/7/24/2019072417461087.png|",EventDesc:"1",EventX:"1",EventY:"1",EventUpdateTime:"2019-07-24T17:46:10",IsValid:1,IsValidName:"正常",Devicesmid:null,DevicesType:null,DeleteStatus:"0",TaskId:-1,Remark_Back:null,OtherSysEventId:null,ExecTime:36,OperId:null,OperName:null,OrderId:null,IsFinish:0,LinkMan:"1",LinkCall:"1",EventStatus:3},{EventCode:"DH190001406",EventAddress:"1",UpTime:"2019-07-24T17:46:10",DeptId:1,PersonId:1,PersonName:"admin",cDepName:"管理层",cRoleName:"设备科",EventTypeId:1,EventTypeId2:1,EventTypeName:"困难用水",EventTypeName2:"困难用水",EventFromId:3,EventFromName:"巡检上报",UrgencyId:1,UrgencyName:"一般",DispatchPerson:null,DispatchPersonName:null,EventPictures:"/upload/EventsImg/2019/7/24/2019072417461024.png|/upload/EventsImg/2019/7/24/2019072417461087.png|",EventDesc:"1",EventX:"1",EventY:"1",EventUpdateTime:"2019-07-24T17:46:10",IsValid:1,IsValidName:"正常",Devicesmid:null,DevicesType:null,DeleteStatus:"0",TaskId:-1,Remark_Back:null,OtherSysEventId:null,ExecTime:36,OperId:null,OperName:null,OrderId:null,IsFinish:0,LinkMan:"1",LinkCall:"1",EventStatus:5}]},70238:function(e,t,n){},badf:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"merge_rows_table table-flex-wraper"},[n("div",{staticClass:"table-contain-wrapper complexTable"},[n("el-table",{ref:"mainTainTable",attrs:{data:e.newEntrustData,stripe:"",border:"","highlight-current-row":"",height:"100%","span-method":e.objectSpanMethod,"cell-style":e.objectColMethod,"row-class-name":e.tableRowClassName},on:{"current-change":e.currentChange,"cell-dblclick":e.tableDbClick,"row-click":e.tableClick}},[n("el-table-column",{attrs:{width:"42px",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[(t.$index+1)%2==0?n("div",{staticClass:"step_hidden_left_title"},[e.handleBtn?n("el-steps",{staticClass:"table-state",attrs:{active:e.newEntrustData[t.$index-1]["OperId"],simple:""}},e._l(e.eventState.slice(0,e.newEntrustData[t.$index-1]["OperId"]-1),function(t,a){return n("el-step",{key:t,attrs:{title:t}},[n("span",{staticClass:"teble-state-span",style:{color:"#fff","background-color":e.colorList[a]},attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.OperName))])])}),1):n("el-steps",{staticClass:"table-state",attrs:{active:e.newEntrustData[t.$index-1]["OperId"],simple:""}},[11!=e.newEntrustData[t.$index-1]["OperId"]?e._l(e.eventState,function(a,r){return n("el-step",{key:a,class:{normal:r>e.newEntrustData[t.$index-1]["OperId"]},attrs:{title:a.OperName}},[n("span",{staticClass:"teble-state-span",style:{color:"#fff","background-color":r<=e.newEntrustData[t.$index-1]["OperId"]-1?e.colorList[r]:"#505761"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(a.OperName))])])}):e._l(e.eventState,function(a,r){return n("el-step",{key:a,class:{normal:r>e.newEntrustData[t.$index-1]["OperId"]},attrs:{title:a.OperName}},[n("span",{staticClass:"teble-state-span",style:{color:"#fff","background-color":r<=0?e.colorList[r]:"#505761"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(a.OperName))])])})],2)],1):e._e(),(t.$index+1)%2!=0?n("div",[e._v(e._s(t.$index/2+1))]):e._e()]}}])}),n("el-table-column",{attrs:{prop:"upTime",label:"上报时间",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row["UpTime"]))])]}}])}),n("el-table-column",{attrs:{label:"操作",fixed:"",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"my-detail",on:{click:function(n){e.detailBtn(t.row)}}},[e._v("处理")])]}}])}),e._l(e.columnList,function(t){return n("el-table-column",{key:t.text,attrs:{fit:"true",prop:t.field,label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){return[t.eventStatus?n("span",{style:{color:e.eventStatusFliter(a.row[t.field])}},[e._v(e._s(t.eventStatus(a.row)))]):n("span",[e._v(e._s(a.row[t.field]))])]}}])})})],2)],1),n("el-pagination",{attrs:{"current-page":e.currentPageNumber,"page-sizes":[50,100,200],"page-size":e.currentPageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.squareQueryTotal},on:{"size-change":e.onPageSizeChange,"current-change":e.onPageChange,"update:currentPage":function(t){e.currentPageNumber=t}}})],1)},r=[],i=(n("ac6a"),n("f499")),s=n.n(i),l=(n("a481"),n("2ef0")),o=n.n(l),c=n("c692"),u=n("dc1e"),d=n("1b9e"),p={components:{},props:{entrustData:{fooMessage:Object},columnList:{fooMessage:Object,required:!0}},data:function(){return{FlowPath:["处理","分派","接受","到场","处置","完工","审核"],currentPageSize:50,currentPageNumber:1,squareQueryTotal:0,eventState:[],colorList:[]}},created:function(){this.init(),this.$bus.on("ExportSearchBTn",this.ExportSearchBTn)},beforeDestroy:function(){this.$bus.off("ExportSearchBTn",this.ExportSearchBTn)},mounted:function(){},computed:{newEntrustData:function(){return this.squareQueryTotal=this.entrustData.sum,this.currentPageSize=this.entrustData.num,this.currentPageNumber=this.entrustData.page,JSON.parse(s()(this.entrustData.Result).replace(/}/g,"},{}"))}},methods:{tableRowClassName:function(e){var t=e.row;e.rowIndex;return t&&0==t.OperId?"obsolete_row_color":""},eventStatusFliter:function(e){console.log(e);var t=o.a.filter(this.eventState,function(t){return t["OperName2"]==e});return t.length?this.colorList[t[0].rank]:void 0},init:function(){var e=this;this.colorList=["#2e8ed7","#2e8ed7","#2e8ed7","#2e8ed7","#2e8ed7","#2e8ed7","#2e8ed7","#1ead7c","#1ead7c","#1ead7c"],c["a"].GetStatusForMantain().then(function(t){e.eventState=t.data.Data.Result,e.eventState.shift(),e.eventState.unshift({OperId:11111,OperName:"上报",OperName2:"上报",rank:11111}),e.eventState.push({OperId:999999,OperName:"完成",OperName2:"完成",rank:8}),console.log(e.eventState)})},objectSpanMethod:function(e){e.row,e.column;var t=e.rowIndex,n=e.columnIndex,a=3;if(this.handleBtn&&(a=3),n<=a)return t%2===0?{rowspan:2,colspan:1}:{rowspan:1,colspan:this.columnList.length-3}},getData:function(){var e=this,t=JSON.parse(localStorage.getItem("getOrderParams")),n="";u["a"].get(t.SubmitStartTime,t.SubmitEndTime,t.eventSourceSelect,t.evevtTypeSelectID,t.nowStatusStID,t.deptDataSelect,t.eventContentName,n,this.currentPageSize,this.currentPageNumber).then(function(t){var n=t.data.Data.Result;console.log(e.currentPageSize),console.log("页码更新",t.data.Data.Result);var a=t.data.Data.TotalRows;for(var r in t.data.Data.Result)t.data.Data.Result[r].ExecTime+="小时";e.entrustData={num:e.currentPageSize,page:e.currentPageNumber,sum:a,Result:n}})},currentChange:function(e){console.log("切换行")},detailBtn:function(e){this.$emit("detailBtn",e)},WorkorderInvalid:function(e){this.$emit("WorkorderInvalid",e)},tableClick:function(e,t,n){o.a.keys(e).length||(e=null),e&&this.$emit("tableClick",e)},tableDbClick:function(e){this.$emit("tableDbClick",e)},onPageSizeChange:function(e){this.currentPageSize=e,console.log("每页",e),this.getData()},onPageChange:function(e){this.currentPageNumber=e,console.log("第几页",e),this.getData()},ExportSearchBTn:function(){Object(d["a"])(".merge_rows_table","事件工单")}}},m=p,v=(n("5cb2"),n("2877")),E=Object(v["a"])(m,a,r,!1,null,null,null);E.options.__file="MainTainTable.vue";t["a"]=E.exports},c692:function(e,t,n){"use strict";var a=n("d255");t["a"]={GetStatusForMantain:function(e,t){return a["a"].get("/EventStatus/GetStatusForMantain",{params:{startTime:e,endTime:t}})},GetEventFrom:function(e,t){return a["a"].get("/EventFrom/GetEventFrom",{params:{startTime:e,endTime:t}})}}},dc1e:function(e,t,n){"use strict";var a=n("d255");t["a"]={get:function(e,t,n,r,i,s,l,o,c,u){return a["a"].get("/EventManageForMaintain/Get",{params:{startTime:e,endTime:t,EventFromId:n,eventType:r,OperId:i,DeptId:s,EventContenct:l,ExecPersonId:o,num:c,page:u}})},getCurrentOrder:function(e,t,n,r,i){return a["a"].get("/EventManageForMaintain/Get",{params:{startTime:n,endTime:r,num:e,page:t,ExecPersonId:i}})},GetEventWorkorder:function(e){return a["a"].get("/EventManageForMaintain/GetEventWorkorderStepForMaintain",{params:{EventID:e}})},WorkorderInvalid:function(e,t,n,r){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WorkorderInvalid",params:{EventID:e,OrderId:t,OperId:n,DispatchPersonID:r}})},WorkListAudit:function(e,t,n,r){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WorkListAudit",params:{EventID:e,OrderId:t,iDetpID:n,iAdminID:r}})},WorkListReceipt:function(e,t,n,r){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WorkListReceipt",params:{EventID:e,ExecDetpID:t,ExecPersonId:n,OrderId:r}})},WorkListPresent:function(e,t,n,r){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WorkListPresent",params:{EventID:e,ExecDetpID:t,ExecPersonId:n,OrderId:r},data:{base64Image:["|"]}})},WorkListChuZhi:function(e,t,n,r){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WorkListChuZhi",params:{EventID:e,ExecDetpID:t,ExecPersonId:n,OrderId:r},data:{base64Image:["|"]}})},WorkListFinished:function(e,t,n,r){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WorkListFinished",params:{EventID:e,DeptId:t,iAdminID:n,OrderId:r},data:{base64Image:["|"]}})},WorkListReAssign:function(e,t,n,r){return a["a"].post("/EventManageForMaintain/WorkListReAssign",{EventID:e,ExecDetpID:t,ExecPersonId:n,DispatchPersonID:r})},WorkListAssign:function(e,t,n,r,i,s){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WorkListAssign",params:{EventID:e,ExecDetpID:t,ExecPersonId:n,DispatchPersonID:r,ExecTime:i,OrderId:s}})},WorkListBackToOper:function(e,t,n,r,i){return a["a"].post("/EventManageForMaintain/WorkListBackToOper",{EventID:e,iAdminID:t,BackDesc:n,PersonId:r,DeptId:i})},WordListBackExec:function(e,t,n,r,i){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WordListBackExec",params:{EventID:e,OrderId:t,iAdminID:n,BackDesc:r,iDeptID:i}})},WordListDelay:function(e,t,n,r,i,s){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WordListDelay",params:{EventID:e,OrderId:t,OperRemarks:n,complishTime:r,DeptId:i,iAdminID:s}})},WorkListDelayExec:function(e,t,n,r,i){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WorkListDelayExec",params:{EventID:e,OrderId:t,complishTime:n,iDeptID:r,iAdminID:i}})},WorkListEventReply:function(e,t,n){return Object(a["a"])({method:"post",url:"/EventManageForMaintain/WorkListEventReply",params:{EventID:e,OrderId:t,OperRemarks:n}})},GetEventListOwn:function(e,t,n,r,i){return a["a"].get("/EventManageForMaintain/GetEventListOwn",{params:{startTime:e,endTime:t,OwnID:n,num:r,page:i}})},EChatbar:function(e,t){return Object(a["a"])({method:"post",url:"/MainTainStatistics/EChatEventFromStatistics",params:{startTime:e,endTime:t}})},EChatLine:function(e,t){return Object(a["a"])({method:"post",url:"/MainTainStatistics/EChatLineEventFromStatistics",params:{startTime:e,endTime:t}})},GetEvents:function(e,t,n,r,i,s){return a["a"].get("/MainTainStatistics/Get",{params:{startTime:e,endTime:t,sort:n,ordering:r,num:i,page:s}})}}},e406:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return i});var a=[{field:"2",text:"上报人员",align:"center"},{field:"3",text:"上报事件次数",align:"center"}],r=[{text:"上报类型",value:"EventFromName",field:"EventFromName"},{text:"事件编号",value:"EventCode",width:100,field:"EventCode"},{text:"处理时间",value:"ExecTime",field:"ExecTime"},{text:"紧急状态",value:"UrgencyName",field:"UrgencyName"},{text:"事件状态",value:"IsValidName",field:"IsValidName"},{text:"事件类型",value:"EventTypeName",field:"EventTypeName",templet:function(e){return'<span class="el-tag">'.concat(e.EventTypeName,"</span>")}},{text:"事件内容",value:"EventTypeName2",field:"EventTypeName2"},{text:"上报人",value:"PersonName",field:"PersonName"},{text:"步骤处理人",value:"ExecPersonName",field:"ExecPersonName"},{text:"处理单位",value:"ExecDetpName",field:"ExecDetpName"},{text:"联系人",value:"LinkMan",field:"LinkMan"},{text:"联系电话",value:"LinkCall",width:96,field:"LinkCall"},{text:"更新时间",value:"EventUpdateTime",field:"EventUpdateTime"}],i=[{field:"3",text:"上报类型",align:"center",fixed:!1},{field:"4",text:"事件编号",align:"center",fixed:!1},{field:"5",text:"处理时间",align:"center",fixed:!1},{field:"6",text:"紧急状态",align:"center",fixed:!1},{field:"7",text:"事件状态",align:"center",fixed:!0},{field:"8",text:"事件类型",align:"center",fixed:!1},{field:"9",text:"事件内容",align:"center",fixed:!1},{field:"10",text:"上报人",align:"center",fixed:!1},{field:"11",text:"步骤处理人",align:"center",fixed:!1},{field:"12",text:"处理单位",align:"center",fixed:!1},{field:"13",text:"联系人",align:"center",fixed:!1},{field:"14",text:"联系电话",align:"center",fixed:!1},{field:"15",text:"更新时间",align:"center",fixed:!1}]}}]);
//# sourceMappingURL=chunk-442ce26b.3566dbf4.js.map