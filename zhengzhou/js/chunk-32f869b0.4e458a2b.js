(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32f869b0"],{"0992":function(t,e,a){"use strict";var n=a("e453"),i=a.n(n);i.a},"0a90":function(t,e,a){var n=a("63b6"),i=a("10ff");n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},1064:function(t,e,a){"use strict";var n=a("5f6f"),i=a.n(n);i.a},"10ff":function(t,e,a){var n=a("e53d").parseFloat,i=a("a1ce").trim;t.exports=1/n(a("e692")+"-0")!==-1/0?function(t){var e=i(String(t),3),a=n(e);return 0===a&&"-"==e.charAt(0)?-0:a}:n},1274:function(t,e,a){},1520:function(t,e,a){"use strict";a("c5f6");var n=a("d255");e["a"]={DeptData:function(){return n["a"].get("/Department/GetUserComboboxList")},AdminNameData:function(t){return n["a"].get("/User/GetUserComboboxList",{params:{deptId:Number(t)}})},GetUserComboboxListNoDelete:function(t){return n["a"].get("/User/GetUserComboboxListNoDelete",{params:{deptId:Number(t)}})},GetPlanCycle:function(){return n["a"].get("/PlanCycle/GetCombobox")}}},"1b6a":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"myDialog",attrs:{visible:t.centerDialogVisible,"before-close":t.handleClose,width:"780px","custom-class":"order_detail_dialog",title:"工单详情",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[t.currentRow?a("div",{staticClass:"step_hidden_left_title"},[a("span",{staticClass:"header_title"},[t._v("处理状态：")]),a("el-steps",{staticClass:"table-state",attrs:{active:t.currentRow.OperId,simple:""}},[11!=t.currentRow.OperId?t._l(t.FlowPath,function(e,n){return a("el-step",{key:e,class:{normal:n>t.currentRow.OperId},attrs:{title:e.OperName}},[a("span",{staticClass:"teble-state-span",style:{color:"#fff","background-color":n<=t.currentRow.OperId-1?t.colorList[n]:"#abb0b3"},attrs:{slot:"title"},on:{click:function(a){t.handleClick(e.rank-1)}},slot:"title"},[t._v(t._s(e.OperName))])])}):t._l(t.FlowPath,function(e,n){return a("el-step",{key:e,class:{normal:n>t.currentRow.OperId},attrs:{title:e.OperName}},[a("span",{staticClass:"teble-state-span",style:{color:"#fff","background-color":n<=0?t.colorList[n]:"#abb0b3"},attrs:{slot:"title"},on:{click:function(a){t.handleClick(e.rank-1)}},slot:"title"},[t._v(t._s(e.OperName))])])})],2)],1):t._e(),t.currentRow.isBtn?a("div",[-1==t.currentRow.OperId?a("div",{staticClass:"operateBtnPar"},[a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:function(e){t.zhuanP(0)}}},[t._v("删除")]),a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:function(e){t.zhuanP(1)}}},[t._v("转派")])],1):t._e(),11==t.currentRow.OperId?a("div",{staticClass:"operateBtnPar"},[t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.fenpai}},[t._v("分派工单")]):t._e()],1):t._e(),2==t.currentRow.OperId?a("div",{staticClass:"operateBtnPar"},[t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.acceptOrder}},[t._v("接单")]):t._e()],1):t._e(),3==t.currentRow.OperId?a("div",{staticClass:"operateBtnPar"},[5!=t.currentRow.IsValid?[t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.arrive}},[t._v("到场")]):t._e(),t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.exitOrder}},[t._v("退单")]):t._e(),t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.timeout}},[t._v("延期")]):t._e()]:[t.localDispathPersonID==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.timeout}},[t._v("延期确认")]):t._e()]],2):t._e(),4==t.currentRow.OperId?a("div",{staticClass:"operateBtnPar"},[5!=t.currentRow.IsValid?[t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.operate}},[t._v("处置")]):t._e(),t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.exitOrder}},[t._v("退单")]):t._e(),t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.timeout}},[t._v("延期")]):t._e()]:[t.localDispathPersonID==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.timeout}},[t._v("延期确认")]):t._e()]],2):t._e(),5==t.currentRow.OperId?a("div",{staticClass:"operateBtnPar"},[5!=t.currentRow.IsValid?[t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.finish}},[t._v("完工")]):t._e(),t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.exitOrder}},[t._v("退单")]):t._e(),t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.timeout}},[t._v("延期")]):t._e()]:[t.localDispathPersonID==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn",attrs:{type:"info"},on:{click:t.timeout}},[t._v("延期确认")]):t._e()]],2):t._e(),6==t.currentRow.OperId?a("div",{staticClass:"operateBtnPar"},[t.currentRow.ExecPersonId==t.currentRow.adminID?a("el-button",{staticClass:"operateBtn fenpai",attrs:{type:"info"},on:{click:t.examine}},[t._v("审核")]):t._e()],1):t._e()]):t._e(),a("el-dialog",{staticClass:"myDialog insPlanDialog",attrs:{title:"转派",visible:t.centerDialog,width:"20%",center:"","append-to-body":"",customClass:"el_add_dialog"},on:{"update:visible":function(e){t.centerDialog=e}}},[a("el-form",{attrs:{"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"转派部门:"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{focus:t.zpUserChange},model:{value:t.zpUserID,callback:function(e){t.zpUserID=e},expression:"zpUserID"}},t._l(t.optionsZpUser,function(t){return a("el-option",{key:t.iAdminID,attrs:{label:t.cAdminName,value:t.iAdminID}})}),1)],1),a("el-form-item",{attrs:{label:"转派人员:"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{focus:t.zpUserChange},model:{value:t.zpUserID,callback:function(e){t.zpUserID=e},expression:"zpUserID"}},t._l(t.optionsZpUser,function(t){return a("el-option",{key:t.iAdminID,attrs:{label:t.cAdminName,value:t.iAdminID}})}),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"my-dialog-cancel",on:{click:function(e){t.centerDialog=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"my-dialog-submit",attrs:{type:"primary"},on:{click:t.zhuanPSure}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"myDialog insPlanDialog",attrs:{title:"回复",visible:t.backDialog,center:"","append-to-body":"",customClass:"el_add_dialog"},on:{"update:visible":function(e){t.backDialog=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"回复内容："}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.backInfo,callback:function(e){t.backInfo=e},expression:"backInfo"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"my-dialog-cancel",on:{click:function(e){t.backDialog=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"my-dialog-submit",attrs:{type:"primary"},on:{click:t.backSure}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"myDialog insPlanDialog",attrs:{title:"分派",visible:t.fenpaiDialog,center:"","append-to-body":"",customClass:"el_add_dialog"},on:{"update:visible":function(e){t.fenpaiDialog=e}}},[a("el-form",{attrs:{"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"分派部门:"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.zpChange},model:{value:t.fpID,callback:function(e){t.fpID=e},expression:"fpID"}},t._l(t.optionsZpPart,function(t){return a("el-option",{key:t.iDeptID,attrs:{label:t.cDepName,value:t.iDeptID}})}),1)],1),a("el-form-item",{attrs:{label:"分派人员:"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{focus:t.fpUserChange},model:{value:t.fpUserID,callback:function(e){t.fpUserID=e},expression:"fpUserID"}},t._l(t.optionsZpUser,function(t){return a("el-option",{key:t.iAdminID,attrs:{label:t.cAdminName,value:t.iAdminID}})}),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"my-dialog-cancel",on:{click:function(e){t.fenpaiDialog=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"my-dialog-submit",attrs:{type:"primary"},on:{click:t.fenpaiSure}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"myDialog insPlanDialog",attrs:{title:"退回",visible:t.goBackDialog,center:"","append-to-body":"",customClass:"el_add_dialog"},on:{"update:visible":function(e){t.goBackDialog=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"退回内容："}},[a("el-input",{attrs:{rows:5,placeholder:"请输入内容"},model:{value:t.goBackInfo,callback:function(e){t.goBackInfo=e},expression:"goBackInfo"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"my-dialog-cancel",on:{click:function(e){t.goBackDialog=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"my-dialog-submit",attrs:{type:"primary"},on:{click:t.goBackSure}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"myDialog insPlanDialog",attrs:{title:"退单备注",visible:t.exitOrderDialog,center:"","append-to-body":"",customClass:"el_add_dialog"},on:{"update:visible":function(e){t.exitOrderDialog=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"退单内容："}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.exitOrderInfo,callback:function(e){t.exitOrderInfo=e},expression:"exitOrderInfo"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"my-dialog-cancel",on:{click:function(e){t.exitOrderDialog=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"my-dialog-submit",attrs:{type:"primary"},on:{click:t.exitOrderSure}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"myDialog insPlanDialog",attrs:{title:"延期",visible:t.timeoutDialog,center:"","append-to-body":"",customClass:"el_add_dialog"},on:{"update:visible":function(e){t.timeoutDialog=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"延时完成日期:"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.timeoutValue,callback:function(e){t.timeoutValue=e},expression:"timeoutValue"}})],1),a("el-form-item",{attrs:{label:"延时完成内容:"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.timeoutContent,callback:function(e){t.timeoutContent=e},expression:"timeoutContent"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"my-dialog-cancel",on:{click:function(e){t.timeoutDialog=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"my-dialog-submit",attrs:{type:"primary"},on:{click:t.timeoutSure}},[t._v("确 定")])],1)],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.changeDialog},model:{value:t.DialogTab,callback:function(e){t.DialogTab=e},expression:"DialogTab"}},[a("el-tab-pane",{staticClass:"event_order_pane",attrs:{label:"工单处理信息",name:"first"}},[a("el-scrollbar",{attrs:{id:"scrollbarM"}},[a("dialog-report",{staticClass:"event_order_pane-item",attrs:{color:t.colorList[0],currentRow:t.currentRow}}),[t._l(t.stepDetail,function(e){return[a("dialog-dispose",{key:e.HistoryId,staticClass:"event_order_pane-item",attrs:{TitleName:e.OperName,colorList:t.colorList,currentRow:t.currentRow,stepDetail:e}})]})]],2)],1),a("el-tab-pane",{staticClass:"event_order_pane",attrs:{label:"处理位置",name:"second"}},[a("div",{staticStyle:{height:"50vh"},attrs:{id:"MDialogDetailMap"}})])],1)],1)},i=[],s=a("59ad"),o=a.n(s),r=(a("a481"),a("2ef0")),l=a.n(r),c=a("da72"),u=a("33b6"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{attrs:{size:"small"}},[t._l(t.sss,function(e,n){return a("el-form-item",{key:n,attrs:{label:"活动区域"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1)}),a("el-row",{staticClass:"title",style:{color:t.color}},[t._v("工单基本信息 ")]),a("table",{staticClass:"dialog-table",attrs:{border:"1"}},[t._l(t.MaDialogReport,function(e,n){return a("tr",{key:n,staticClass:"wrapperCol"},[a("td",{staticClass:"dialog-table-lable"},[t._v(t._s(e[0]))]),a("td",[t._v(t._s(e[1]))]),a("td",{staticClass:"dialog-table-lable"},[t._v(t._s(e[2]))]),a("td",[t._v(t._s(e[3]))])])}),a("tr",{staticClass:"wrapperCol"},[a("td",{staticClass:"dialog-table-lable"},[t._v("事件备注：")]),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.currentRow.EventDesc))])])],2)],2)},p=[],m=a("dc1e"),h={components:{},data:function(){return{}},props:{color:{default:"#7a7e80"},currentRow:"currentRow"},computed:{MaDialogReport:function(){return[["事件编号：",this.currentRow.EventCode,"事件地址：",this.currentRow.EventAddress],["上报时间：",this.currentRow.UpTime,"工单来源：",this.currentRow.EventFromName],["上报人：",this.currentRow.PersonName,"上报部门：",this.currentRow.cDepName],["事件类型：",this.currentRow.EventTypeName,"事件内容：",this.currentRow.EventTypeName2],["紧急程度：",this.currentRow.UrgencyName,"处理时间：",this.currentRow.ExecTime],["联系人：",this.currentRow.LinkMan,"联系电话：",this.currentRow.LinkCall],["处理部门：",this.currentRow.ExecDetpName,"处理人：",this.currentRow.ExecPersonName]]}},created:function(){},methods:{}},f=h,v=(a("0992"),a("2877")),D=Object(v["a"])(f,d,p,!1,null,"946d1c3a",null);D.options.__file="DialogReport.vue";var g=D.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",[a("el-row",{staticClass:"title",style:{color:t.color}},[t._v("\n    "+t._s(t.TitleName)+"\n    "),a("span",{staticClass:"title_time"},[t._v("("+t._s(t.TitleTime)+")")])]),t.MaDialogDispose?a("table",{staticClass:"dialog-table",attrs:{border:"1"}},[t._l(t.MaDialogDispose,function(e,n){return a("tr",{key:n,staticClass:"wrapperCol"},[a("td",{staticClass:"dialog-table-lable"},[t._v(t._s(e[0]))]),a("td",[t._v(t._s(e[1]))]),a("td",{staticClass:"dialog-table-lable"},[t._v(t._s(e[2]))]),a("td",[t._v(t._s(e[3]))]),a("td",{staticClass:"dialog-table-lable"},[t._v(t._s(e[4]))]),a("td",[t._v(t._s(e[5]))])])}),t._l(t.MaDialogImgAndReply,function(e,n){return a("tr",{key:n,staticClass:"wrapperCol",class:{"dialog_img-wrapper":t.isarray(e)&&e.length}},[a("td",{staticClass:"dialog-table-lable"},[t._v(t._s(n))]),t.isarray(e)?a("td",{staticClass:"dialog_img",attrs:{colspan:"5"}},t._l(e,function(t,e){return a("a",{key:e,attrs:{href:t,target:"_blank"}},[a("img",{attrs:{src:t,alt:""}})])}),0):a("td",{attrs:{colspan:"5"}},[t._v(t._s(e))])])})],2):t._e()],1)},I=[],E={components:{},props:["TitleName","colorList","stepDetail"],data:function(){return{color:"",TitleTime:""}},computed:{MaDialogDispose:function(){if(!this.stepDetail)return!1;this.TitleTime=this.stepDetail.ExecUpDateTime;var t=this.stepDetail.OperId;return 11==t&&(t=1),this.color=this.colorList[t],"接受"===this.TitleName?[["接受部门：",this.stepDetail.ExecDetpName||"未知","接受人员：",this.stepDetail.ExecPersonName||"未知","接受时间：",this.stepDetail.ExecUpDateTime]]:("审核"==this.TitleName||"作废"==this.TitleName||"处理"===this.TitleName||"完工"==this.TitleName||"处置"===this.TitleName||"分派"===this.TitleName||"到场"===this.TitleName||"延期申请"===this.TitleName||"延期确认"===this.TitleName||"退单"===this.TitleName||"完成"===this.TitleName)&&[["转理部门：",this.stepDetail.DispatchPersonDeptName,"转理人员：",this.stepDetail.DispatchPersonName,"处理时间：",this.stepDetail.ExecUpDateTime],["处理部门：",this.stepDetail.ExecDetpName,"处理人员：",this.stepDetail.ExecPersonName,"处理时间：",this.stepDetail.ExecUpDateTime]]},MaDialogImgAndReply:function(){return("到场"==this.TitleName||"处置"==this.TitleName||"完工"==this.TitleName)&&{"上报图片：":[this.stepDetail.Pictures],"处理回复：":this.stepDetail.OperRemarks}}},methods:{isarray:function(t){return l.a.isArray(t)}}},y=E,C=(a("b58d"),Object(v["a"])(y,b,I,!1,null,null,null));C.options.__file="DialogDispose.vue";var w=C.exports,R=a("c692"),_=a("ae16"),x={components:{DialogReport:g,DialogDispose:w},props:["centerDialogVisible","currentRow"],created:function(){this.init()},data:function(){return{stepDetail:[],loading:!1,orderDetail:[],DialogTab:"first",colorList:["#2e8ed7","#2e8ed7","#2e8ed7","#2e8ed7","#2e8ed7","#2e8ed7","#2e8ed7","#1ead7c","#1ead7c","#1ead7c"],FlowPath:[],fenpaiDialog:!1,exitOrderDialog:!1,centerDialog:!1,backDialog:!1,timeoutDialog:!1,optionsZpPart:[],optionsZpUser:[],backInfo:"",goBackInfo:"",exitOrderInfo:"",timeoutValue:"",timeoutContent:"",zpID:"",fpID:"",zpUserID:"",fpUserID:"",adminID:"",adminName:"",IsFpUserID:""}},watch:{centerDialogVisible:function(){this.centerDialogVisible?(this.loadData(),this.mapCreat()):this.DialogTab="first"}},computed:{IsFpUserID:function(){return localStorage.getItem("fpUserID")?this.IsFpUserID=localStorage.getItem("fpUserID"):this.IsFpUserID=this.currentRow.DispatchPersonID,this.IsFpUserID}},methods:{loadData:function(t){var e=this,a=this.currentRow.EventID||t;this.loading=!0,m["a"].GetEventWorkorder(a).then(function(t){e.stepDetail=t.data.Data.Result,console.log(e.stepDetail),e.stepDetail.length>0&&(e.localDispathPersonID=e.stepDetail[0].DispatchPersonID,l.a.each(e.stepDetail,function(t,a){e.stepDetail[a].ExecUpDateTime=e.stepDetail[a].ExecUpDateTime.replace(/T/," ")})),e.loading=!1})},mapCreat:function(){var t=this;this.$nextTick(function(){if(t.centerDialogVisible&&"second"===t.DialogTab){var e=t.currentRow.EventX||113.52334821796903,a=t.currentRow.EventY||34.77318724078378;if(t.MapMethods)t.MapMethods.setPointOnMap([[e,a]],!1,function(){},"RoutePoint","desript"),t.MapMethods.setCenter([e,a]);else{var n=new c["a"];n.createMap("MDialogDetailMap").then(function(n){console.log(n),t.MapMethods=new u["a"](n),t.MapMethods.setPointOnMap([[e,a]],!1,function(){},"RoutePoint","desript"),t.MapMethods.setCenter([e,a])}).catch(function(t){console.log(t)})}}})},handleClick:function(t){var e=document.querySelectorAll("#scrollbarM .el-scrollbar__view .el-form");document.getElementById("scrollbarM").getElementsByClassName("el-scrollbar__wrap")[0].scrollTop=e[t].offsetTop},changeDialog:function(t,e){this.mapCreat()},init:function(){var t=this,e=JSON.parse(localStorage.getItem("iAdminID"));this.adminID=e.iAdminID,this.adminName=e.cAdminName,this.FlowPath.length||R["a"].GetStatusForMantain().then(function(e){t.FlowPath=e.data.Data.Result,t.FlowPath.shift(),t.FlowPath.unshift({OperId:0,OperName:"上报",OperName2:"上报",rank:0}),t.FlowPath.push({OperId:8,OperName:"完成",OperName2:"完成",rank:8})})},handleClose:function(){this.$emit("update:centerDialogVisible",!1),document.getElementById("scrollbarM").getElementsByClassName("el-scrollbar__wrap")[0].scrollTop=0},dakai:function(){this.centerDialog=!0,this.getzhuanPpart()},back:function(){this.backDialog=!0},goBack:function(){this.goBackDialog=!0},exitOrder:function(){this.exitOrderDialog=!0},acceptOrder:function(){var t=this;console.log(1),m["a"].WorkListReceipt(this.currentRow.EventID,this.currentRow.ExecDetpID,this.currentRow.ExecPersonId,this.currentRow.OrderId).then(function(e){t.$message("接单成功"),t.loadData(),t.$parent.getOrder(),t.$parent.SubmitResult()})},arrive:function(){var t=this;m["a"].WorkListPresent(this.currentRow.EventID,this.currentRow.ExecDetpID,this.currentRow.ExecPersonId,this.currentRow.OrderId).then(function(e){t.$message("到场成功"),t.loadData(),t.$parent.getOrder(),t.$parent.SubmitResult()})},exitOrderSure:function(){var t=this;m["a"].WordListBackExec(this.currentRow.EventID,this.currentRow.OrderId,this.adminID,this.exitOrderInfo,this.currentRow.DeptId).then(function(e){t.$message("退单成功"),t.loadData(),t.$parent.getOrder(),t.$parent.SubmitResult(),t.exitOrderDialog=!1})},timeout:function(){this.timeoutDialog=!0},operate:function(){var t=this;m["a"].WorkListChuZhi(this.currentRow.EventID,this.currentRow.ExecDetpID,this.currentRow.ExecPersonId,this.currentRow.OrderId).then(function(e){t.$message("处置成功"),t.loadData(),t.$parent.getOrder(),t.$parent.SubmitResult()})},finish:function(){var t=this;m["a"].WorkListFinished(this.currentRow.EventID,this.currentRow.DeptId,this.adminID,this.currentRow.OrderId).then(function(e){t.$message("完工成功"),t.loadData(),t.$parent.getOrder(),t.$parent.SubmitResult()})},examine:function(){var t=this;m["a"].WorkListAudit(this.currentRow.EventID,this.currentRow.OrderId,this.currentRow.DeptId,this.adminID).then(function(e){t.$message("审核成功"),t.loadData(),t.$parent.getOrder(),t.$parent.SubmitResult()})},timeoutSure:function(t){var e=this;this.timeoutValue?this.timeoutContent?5!=this.currentRow.IsValid?m["a"].WordListDelay(this.currentRow.EventID,this.currentRow.OrderId,this.timeoutContent,this.timeoutValue,this.currentRow.ExecDetpID,this.adminID).then(function(t){e.$message("延期成功"),e.loadData(),e.$parent.getOrder(),e.$parent.SubmitResult(),e.timeoutDialog=!1}):m["a"].WorkListDelayExec(this.currentRow.EventID,this.currentRow.OrderId,this.timeoutValue,this.currentRow.DeptId,this.adminID).then(function(t){e.$message("延期成功"),e.loadData(),e.$parent.getOrder(),e.$parent.SubmitResult(),e.timeoutDialog=!1,e.currentRow.timeoutIsPerson=!0,localStorage.removeItem("isOwn")}):this.$message("请选择延期内容"):this.$message("请选择延期日期")},backSure:function(){var t=this;this.backInfo?m["a"].WorkListEventReply(this.currentRow.EventID,this.backInfo).then(function(e){t.$message("回复成功"),t.backDialog=!1,t.loadData(),t.$parent.getOrder(),t.$parent.SubmitResult()}):this.$message("请输入回复内容")},goBackSure:function(){var t=this;this.goBackInfo?m["a"].WorkListBackToOper(this.currentRow.EventID,this.adminID,this.goBackInfo,this.currentRow.DispatchPersonID,this.currentRow.DeptId).then(function(e){console.log(e.data.Data.Result),t.goBackDialog=!1}):this.$message("请输入退回内容")},fenpai:function(){this.fenpaiDialog=!0,this.fpID="",this.fpUserID="",this.getzhuanPpart()},fenpaiSure:function(){var t=this;if(this.fpID)if(this.fpUserID){localStorage.setItem("fpDeptID",this.fpUserID);var e=this.currentRow.ExecTime;isNaN(e)?this.hourUp=o()(e.slice(0,2)):this.hourUp=e,m["a"].WorkListAssign(this.currentRow.EventID,this.fpID,this.fpUserID,this.adminID,this.hourUp,this.currentRow.OrderId).then(function(e){t.$message("分派成功"),t.loadData(),t.$parent.getOrder(),t.$parent.SubmitResult(),t.fenpaiDialog=!1})}else this.$message("请选择分派人员");else this.$message("请选择分派部门")},zhuanPSure:function(){var t=this;this.zpID?this.zpUserID?m["a"].WorkListReAssign(this.currentRow.EventID,this.currentRow.ExecDetpID,this.currentRow.ExecPersonId,this.currentRow.DispatchPersonID,this.adminID).then(function(e){t.$message("转派成功"),t.loadData(),t.$parent.getOrder(),t.$parent.SubmitResult(),t.centerDialog=!1}):this.$message("请选择转派人员"):this.$message("请选择转派部门")},zpChange:function(t){this.getzhuanPuser(t)},zpUserChange:function(){this.zpID?this.getzhuanPuser(this.zpID):this.$message("请先选择转派部门")},fpUserChange:function(){this.fpID?this.getzhuanPuser(this.fpID):this.$message("请先选择分派部门")},getzhuanPpart:function(){var t=this;_["a"].excelPart().then(function(e){t.optionsZpPart=e.data.Data.Result})},getzhuanPuser:function(t){var e=this;_["a"].excelUser(t).then(function(t){e.optionsZpUser=t.data.Data.Result,console.log(e.optionsZpUser)})}}},k=x,S=(a("ab4e"),Object(v["a"])(k,n,i,!1,null,"e00e58bc",null));S.options.__file="detailDialog.vue";e["a"]=S.exports},"36a3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticStyle:{padding:"0"},attrs:{type:"flex",justify:"between"}},[a("el-col",{staticClass:"data-btn-wrapper",style:{top:t.top,right:"34px"},attrs:{span:t.spanNum,xs:18,sm:18,lg:14,xl:t.spanNum}},[t.dataTitle?a("el-form-item",{attrs:{label:t.dataTitle}},[a("el-row",{staticStyle:{padding:"0"},attrs:{type:"flex",justify:"end"}},t._l(t.timeList,function(e){return a("el-radio",{key:e.value,staticClass:"row-select-btn",class:e.class,attrs:{size:"mini",label:e.value},on:{change:function(a){t.typeChoose(e.value,"timeListValue")}},model:{value:t.timeListValue,callback:function(e){t.timeListValue=e},expression:"timeListValue"}},[t._v(t._s(e.text))])}),1)],1):a("el-row",{staticStyle:{padding:"0"},attrs:{type:"flex",justify:"end"}},t._l(t.timeList,function(e){return a("el-radio",{directives:[{name:"show",rawName:"v-show",value:!!t.dataTitle||e.large,expression:"dataTitle?true:item.large"}],key:e.value,staticClass:"row-select-btn",class:e.class,attrs:{label:e.value},on:{change:function(a){t.typeChoose(e.value,"timeListValue")}},model:{value:t.timeListValue,callback:function(e){t.timeListValue=e},expression:"timeListValue"}},[t._v(t._s(e.text))])}),1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"custom"==t.timeListValue,expression:"timeListValue == 'custom'"}],staticClass:"data-select-wrapper",style:{left:t.dataLeft},attrs:{span:t.dataSpan,xs:14,sm:14,lg:11,xl:t.dataSpan}},[a("el-form-item",{attrs:{label:"日期：","label-width":"83px"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",type:"daterange",align:"right","unlink-panels":"","range-separator":"- -","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2},on:{change:t.GetData},model:{value:t.timeArray,callback:function(e){t.timeArray=e},expression:"timeArray"}})],1)],1)],1)],1)},i=[],s=(a("7f7f"),a("c5f6"),a("2ef0"),a("1b2f")),o={data:function(){return{timeArray:[],timeList:[{text:"全部",value:"all",large:!0},{text:"本日",value:"today",large:!0},{text:"本周",value:"thisWeek",large:!0},{text:"上周",value:"lastWeek",large:!1,class:"hidden-md-and-down"},{text:"本月",value:"thisMonth",large:!0,class:"hidden-md-and-down"},{text:"自定义",value:"custom",large:!0}],timeListValue:""}},props:{dataTitle:{type:String,default:""},spanNum:{type:Number,default:14},top:{type:String,default:"-31px"},dataLeft:{type:String,default:"0px"},dataSpan:{type:Number,default:10}},mounted:function(){},created:function(){this.onLoadData(),this.GetData()},watch:{dataSpanPosition:function(){console.log(this.dataSpanPosition)}},methods:{onLoadData:function(){this.timeListValue=this.timeList[0].value},GetData:function(){var t,e,a;switch(this.timeListValue){case"thisMonth":t=s["a"].getMonth(),e=t.begin,a=t.over;break;case"today":var n=s["a"].getCurrentDate();t=s["a"].myformatStr(n),e=t,a=t;break;case"thisWeek":t=s["a"].getDayAndWeek("week"),e=t.begin,a=t.over;break;case"lastWeek":t=s["a"].getDayAndWeek("lastWeek"),e=t.begin,a=t.over;break;case"custom":e=this.timeArray[0],a=this.timeArray[1];break;default:break}this.$emit("DateBtn",e,a)},typeChoose:function(t,e){this[e]=t,"MaAnalysis"===this.$route.name&&("custom"===this.timeListValue?(console.log("haha"),this.$emit("controlTableHeight",!0)):this.$emit("controlTableHeight",!1)),this.GetData()}}},r=o,l=(a("1064"),a("2877")),c=Object(l["a"])(r,n,i,!1,null,null,null);c.options.__file="DateBtnChoose.vue";e["a"]=c.exports},"4f05":function(t,e,a){},"59ad":function(t,e,a){t.exports=a("7be7")},"5f6f":function(t,e,a){},"6c6e":function(t,e,a){"use strict";var n=a("a89d"),i=a.n(n);i.a},"7be7":function(t,e,a){a("0a90"),t.exports=a("584a").parseFloat},8588:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"initiate_table"},[a("div",{staticClass:"header_title_"},[t._v("事件基本信息")]),a("el-form",{attrs:{"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"事件来源："}},[a("el-select",{attrs:{size:"small"},on:{change:t.onAttRChange},model:{value:t.EventSourceDataSelect,callback:function(e){t.EventSourceDataSelect=e},expression:"EventSourceDataSelect"}},t._l(t.eventSource,function(t){return a("el-option",{key:t.EventFromId,attrs:{label:t.EventFromName,value:t.EventFromId}})}),1)],1)],1),a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"紧急程度："}},[a("el-select",{attrs:{size:"small"},on:{change:t.onAttRChange},model:{value:t.UrgencyDataSelect,callback:function(e){t.UrgencyDataSelect=e},expression:"UrgencyDataSelect"}},t._l(t.UrgencyList,function(t){return a("el-option",{key:t.UrgencyId,attrs:{label:t.UrgencyName,value:t.UrgencyId}})}),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"事件类型："}},[a("el-select",{attrs:{size:"small"},on:{change:t.onAttRChange},model:{value:t.EvevtClassDataSelect,callback:function(e){t.EvevtClassDataSelect=e},expression:"EvevtClassDataSelect"}},t._l(t.evevtType,function(t){return a("el-option",{key:t.EventTypeId,attrs:{label:t.EventTypeName,value:t.EventTypeId}})}),1)],1)],1),a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"事件内容："}},[a("el-select",{attrs:{size:"small"},on:{focus:t.operateEventContent,change:t.onAttRChange},model:{value:t.EvevtContentDataSelect,callback:function(e){t.EvevtContentDataSelect=e},expression:"EvevtContentDataSelect"}},t._l(t.EvevtContentData,function(t){return a("el-option",{key:t.EventTypeId,attrs:{label:t.EventTypeName,value:t.EventTypeId}})}),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"联系人："}},[a("el-input",{staticClass:"width_bi80",attrs:{size:"mini",placeholder:"请输入联系人"},model:{value:t.Linkman,callback:function(e){t.Linkman=e},expression:"Linkman"}})],1)],1),a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"联系电话："}},[a("el-input",{staticClass:"width_bi80",attrs:{size:"mini",placeholder:"请输入联系电话"},model:{value:t.Phone,callback:function(e){t.Phone=e},expression:"Phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"处理部门："}},[a("el-select",{attrs:{size:"small"},on:{change:t.onAttRChange},model:{value:t.UnitDataSelect,callback:function(e){t.UnitDataSelect=e},expression:"UnitDataSelect"}},t._l(t.deptData,function(t,e){return a("el-option",{key:e.iDeptID,attrs:{label:t.cDepName,value:t.iDeptID}})}),1)],1)],1),a("el-col",{attrs:{xs:12,sm:12}},[a("el-form-item",{attrs:{label:"处理人："}},[a("el-select",{attrs:{size:"small"},on:{focus:t.operateUser,change:t.onAttRChange},model:{value:t.DisposeUserSelect,callback:function(e){t.DisposeUserSelect=e},expression:"DisposeUserSelect"}},t._l(t.DisposeUser,function(t){return a("el-option",{key:t.iAdminID,attrs:{label:t.cAdminName,value:t.iAdminID}})}),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"事件地址："}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入事件地址"},model:{value:t.EventAddress,callback:function(e){t.EventAddress=e},expression:"EventAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"位置坐标："}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{size:"mini"},model:{value:t.Coordinate.x,callback:function(e){t.$set(t.Coordinate,"x",e)},expression:"Coordinate.x"}})],1),a("el-col",{attrs:{span:1}},[a("span",[t._v("_")])]),a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{size:"mini"},model:{value:t.Coordinate.y,callback:function(e){t.$set(t.Coordinate,"y",e)},expression:"Coordinate.y"}})],1),a("el-col",{attrs:{span:4,offset:1}},[a("el-button",{staticClass:"my-setCoordinate",attrs:{size:"mini"},on:{click:t.settingPosition}},[t._v("设定位置")])],1)],1)],1)],1),a("el-row",[a("el-col",{staticStyle:{height:"auto"},attrs:{span:24}},[a("el-form-item",{attrs:{label:"事件备注："}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:20},placeholder:"请输入内容"},model:{value:t.EventNote,callback:function(e){t.EventNote=e},expression:"EventNote"}})],1)],1)],1)],1),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{staticClass:"my-evenReport",attrs:{size:"mini"},on:{click:t.eventUpload}},[t._v("事件上报")])],1)],1)},i=[],s=a("1520"),o=a("ae16"),r=a("f508"),l=(a("dc1e"),{name:"Initiate",data:function(){return{EventSourceDataSelect:"",EventSourceData:[],UrgencyDataSelect:"",UrgencyData:[],EvevtClassDataSelect:"",EvevtClassData:[],EvevtContentDataSelect:"",EvevtContentData:[],Linkman:"",Phone:"",EventAddress:"",Coordinate:{x:"",y:""},UnitDataSelect:"",UnitData:[],DisposeUserSelect:"",DisposeUser:[],EventNote:"",evevtType:[],eventSource:[],deptData:[],UrgencyList:[],userDeptID:""}},mounted:function(){this.init()},methods:{init:function(){this.EventSourceData=["接电上报","部门上报","未知"],this.UrgencyData=["一般","紧急","非常紧急"],this.axiosDeptData(),this.axiosEventFrom(),this.axiosEventType(),this.GetUrgencyList(),this.getDeptid()},eventUpload:function(){var t=this;if(this.$emit("eventUpload"),this.EventSourceDataSelect)if(this.UrgencyDataSelect)if(this.EvevtClassDataSelect)if(this.EvevtContentDataSelect)if(this.Linkman)if(this.Phone)if(this.EventAddress)if(this.UnitDataSelect)if(this.DisposeUserSelect)if(this.Coordinate.x)if(this.Coordinate.y){var e=JSON.parse(localStorage.getItem("iAdminID")),a=e.cAdminName,n=e.iAdminID,i=["|"];console.log(e,e.cAdminName,n),o["a"].eventUpload(n,a,this.userDeptID,this.EventSourceDataSelect,this.UrgencyDataSelect,this.EvevtClassDataSelect,this.EvevtContentDataSelect,this.Linkman,this.Phone,this.EventAddress,this.Coordinate.x,this.Coordinate.y,this.UnitDataSelect,this.DisposeUserSelect,this.EventNote,i).then(function(e){t.$message("上报成功"),t.$router.push({name:"MaSelfDispose"})})}else this.$message("请输入位置y坐标");else this.$message("请输入位置x坐标");else this.$message("请选择处理人");else this.$message("请选择处理部门");else this.$message("请选择事件地址");else this.$message("请输入电话");else this.$message("请输入联系人");else this.$message("请选择事件内容");else this.$message("请选择事件类型");else this.$message("请选择紧急程度");else this.$message("请选择事件来源")},settingPosition:function(){var t=this;this.$bus.emit("addInteractions","Point",!1,function(e){t.Coordinate={x:e[0],y:e[1]},t.$bus.emit("setPointOnMap",[e],!1,function(){},"RoutePoint","desript"),t.$bus.emit("setCenter",e)})},axiosDeptData:function(){var t=this;s["a"].DeptData().then(function(e){t.deptData=e.data.Data.Result})},axiosEventFrom:function(){var t=this;o["a"].GetEventFromComboBoxList().then(function(e){t.eventSource=e.data.Data.Result})},axiosEventType:function(){var t=this,e=1,a=100;r["a"].EventTypeAll(a,e).then(function(e){t.evevtType=e.data.Data.Result})},GetUrgencyList:function(){var t=this;o["a"].GetUrgencyComboBoxList().then(function(e){t.UrgencyList=e.data.Data.Result})},getEventContent:function(t){var e=this;o["a"].EventContent(t).then(function(t){e.EvevtContentData=t.data.Data.Result,console.log(e.EvevtContentData)})},operateEventContent:function(){this.EvevtClassDataSelect?this.getEventContent(this.EvevtClassDataSelect):this.$message("请先选择事件类型")},getUser:function(t){var e=this;o["a"].GetUserComboboxListNoDelete(t).then(function(t){e.DisposeUser=t.data.Data.Result,console.log(e.DisposeUser)})},operateUser:function(){console.log(this.UnitDataSelect),this.UnitDataSelect?this.getUser(this.UnitDataSelect):this.$message("请先选择处理部门")},onAttRChange:function(){console.log(this.UnitDataSelect)},getDeptid:function(){var t=this,e=JSON.parse(localStorage.getItem("iAdminID")),a=e.cAdminName;o["a"].getDeptid().then(function(e){var n=e.data.Data.Result.filter(function(t){return t.cAdminName==a});t.userDeptID=n[0].iDeptID})}}}),c=l,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null);d.options.__file="Initiate.vue";e["a"]=d.exports},"8fba2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"MaintainGIS table_style",class:{flexible:t.flexible}},[a("TableFormTitle",{attrs:{titleName:t.titleName,flexible:t.flexible},on:{"update:flexible":function(e){t.flexible=e}}}),a("el-form",{attrs:{"label-width":"83px","label-position":"right",size:"small",gutter:"20px"}},[a("date-btn-choose",{ref:"dateBtnChoose",attrs:{dataSpan:10},on:{DateBtn:t.SubmitTime}}),a("el-button",{staticClass:"my-del",attrs:{size:"mini"},on:{click:function(e){t.orderInvalid()}}},[t._v("作废")]),a("el-button",{staticClass:"my-process",attrs:{size:"mini"},on:{click:function(e){t.disposeMsgBtn()}}},[t._v("查询")])],1),a("main-tain-table",{attrs:{entrustData:t.entrustData,columnList:t.columnList},on:{detailBtn:t.detailBtn,WorkorderInvalid:t.WorkorderInvalid,tableClick:t.tableClick,tableDbClick:t.tableDbClick}}),a("detailDialog",{ref:"detailLog",attrs:{centerDialogVisible:t.centerDialogVisible,currentRow:t.currentRow},on:{"update:centerDialogVisible":function(e){t.centerDialogVisible=e}}})],1)},i=[],s=a("f499"),o=a.n(s),r=(a("28a5"),a("c5f6"),a("2ef0")),l=a.n(r),c=(a("bc3a"),a("6ecc"),a("e406")),u=a("39c6"),d=(a("da72"),a("33b6"),a("badf")),p=a("8588"),m=a("1d1f"),h=a("1b6a"),f=a("36a3"),v=a("dc1e"),D=(a("ae16"),{components:{Initiate:p["a"],MainTainTable:d["a"],TableFormTitle:m["a"],detailDialog:h["a"],DateBtnChoose:f["a"]},data:function(){return{flexible:!1,titleName:"已办工单",currentRow:"",eventOrderResult:[],columnList:[],eventOrderResultLength:"",entrustData:[],DisposePages:[{name:"待办处理",urlTo:"Entrust"},{name:"发起事件",urlTo:"Initiate"},{name:"已办工单",urlTo:"HaveDone"}],centerDialogVisible:!1,adminName:"",adminID:"",num:50,page:1,SubmitStartTime:"",SubmitEndTime:"",hourUp:"",simple:""}},created:function(){this.GetEventListOwn(),this.init()},methods:{init:function(){this.eventOrderResult?(this.columnList=c["c"],this.entrustData={num:this.num,page:this.page,sum:this.eventOrderResultLength,Result:this.eventOrderResult}):this.GetEventListOwn()},tableClick:function(t){this.currentRow=t,console.log(t)},tableDbClick:function(t){this.currentRow=t,this.drawPoint(t)},drawPoint:function(t){var e=[],a=[];if(l.a.isArray(t))l.a.map(t,function(n){if(n.EventX&&n.EventY){e.push([Number(n.EventX),Number(n.EventY)]);var i=[];n.EventPictures&&(i=n.EventPictures.split("|"),i=l.a.map(i,function(t){return u["a"].apiPath.insURL+t})),a.push({EventCode:t.EventCode,DeptName:t.DispatchPersonDeptName,PName:t.PersonName,ET1:t.EventTypeName2,EventFromName:t.EventFromName,HandlerLevelName:t.UrgencyName,eventAddress:t.EventAddress,eventDesc:t.EventDesc||"数据最后上传时间"+t.UpTime,EventPictures:i})}});else if(t.EventX&&t.EventY){var n;e.push([Number(t.EventX),Number(t.EventY)]);var i=[];t.EventPictures&&(i=t.EventPictures.split("|"),i=l.a.map(i,function(t){return u["a"].apiPath.insURL+t})),a.push({EventCode:t.EventCode,DeptName:t.DispatchPersonDeptName,PName:t.PersonName,ET1:t.EventTypeName2,EventFromName:t.EventFromName,HandlerLevelName:t.UrgencyName,eventAddress:t.EventAddress,eventDesc:t.EventDesc||"数据最后上传时间"+t.UpTime,EventPictures:i}),(n=this.$bus).emit.apply(n,["setCenter"].concat(e))}else this.$message({type:"error",message:"此事件未上传点位",showClose:!1});this.$bus.emit("onPointermoveControl"),this.$bus.emit("setPointOnMap",e,!1,function(){},"EventPoint",a)},detailBtn:function(t){if(this.currentRow=t,console.log(t),0==t.IsValid)this.$message("此工单已作废");else{t.EventID&&this.$refs.detailLog.loadData(t.EventID);var e=JSON.parse(localStorage.getItem("iAdminID"));this.currentRow.adminID=e.iAdminID,console.log(e.iAdminID),this.currentRow.isBtn=!0,this.centerDialogVisible=!0}},GetEventListOwn:function(t){var e=this,a=JSON.parse(localStorage.getItem("iAdminID"));this.adminID=a.iAdminID,this.adminName=a.cAdminName,v["a"].GetEventListOwn(this.SubmitStartTime,this.SubmitEndTime,this.adminID,this.num,this.page).then(function(a){for(var n in e.eventOrderResult=a.data.Data.Result,a.data.Data.Result)a.data.Data.Result[n].ExecTime+="小时";if(t){var i=e.eventOrderResult.filter(function(e){return e.EventID==t});i[0].OperName2="无效"}e.eventOrderResultLength=a.data.Data.TotalRows,e.columnList=c["c"],e.entrustData={num:e.num,page:e.page,sum:e.eventOrderResultLength,Result:e.eventOrderResult}})},SubmitTime:function(t,e){this.SubmitStartTime=t,this.SubmitEndTime=e,this.GetEventListOwn()},getOrder:function(){var t=this;v["a"].getCurrentOrder(50,1).then(function(e){var a=o()(e.data.Data.Result),n=JSON.parse(a).filter(function(e){return e.EventID==t.currentRow.EventID});console.log(n[0]),n[0].ExecTime+="小时",t.detailBtn(n[0])})},orderInvalid:function(){var t=this;this.currentRow.OrderId?this.simple!=this.currentRow.EventID?v["a"].WorkorderInvalid(this.currentRow.EventID,this.currentRow.OrderId,this.currentRow.OperId,this.currentRow.DispatchPersonID).then(function(e){t.$message("作废成功"),t.simple=t.currentRow.EventID,t.GetEventListOwn(t.currentRow.EventID)}):this.$message("请选择工单"):this.$message("此工单未分派,请重新选择")}}}),g=D,b=(a("6c6e"),a("2877")),I=Object(b["a"])(g,n,i,!1,null,"02b1e574",null);I.options.__file="OwnWordListExecuted.vue";e["default"]=I.exports},a89d:function(t,e,a){},ab4e:function(t,e,a){"use strict";var n=a("1274"),i=a.n(n);i.a},ae16:function(t,e,a){"use strict";var n=a("d255");e["a"]={GetEventFromComboBoxList:function(){return n["a"].get("/EventStartForMaintain/GetEventFromComboBoxList")},GetUrgencyComboBoxList:function(){return n["a"].get("/EventStartForMaintain/GetUrgencyComboBoxList")},AddEventStart:function(t,e,a,i,s,o,r,l,c,u,d,p,m,h,f,v,D){return n["a"].post("/EventStartForMaintain/AddEventStart",{iAdminID:t,cAdminName:e,iDeptID:a,EventFromId:i,UrgencyId:s,EventTypeId:o,EventTypeId2:r,EventTypeName:l,EventTypeName2:c,EventX:u,EventY:d,ExecDetpID:p,ExecPersonId:m,EventDesc:h,LinkMan:f,LinkCall:v,EventAddress:D})},eventUpload:function(t,e,a,i,s,o,r,l,c,u,d,p,m,h,f,v){return Object(n["a"])({url:"/EventManage/Post",method:"post",params:{personId:t,adminName:e,deptId:a,eventFromId:i,urgencyId:s,eventTypeId:o,eventTypeId2:r,linkMan:l,linkCall:c,eventAddress:u,eventX:d,eventY:p,execDetpId:m,execPersonId:h,eventDesc:f},data:{base64Image:v}})},EventContent:function(t,e,a,i,s){return n["a"].get("/EventContent/GetByEventTypeId",{params:{eventTypeId:t,sort:"EventTypeName",ordering:"desc",num:100,page:1}})},excelUser:function(t){return n["a"].get("/User/GetUserComboboxList",{params:{deptId:t}})},GetUserComboboxListNoDelete:function(t){return n["a"].get("/User/GetUserComboboxListNoDelete",{params:{deptId:t}})},excelPart:function(){return n["a"].get("/Department/GetUserComboboxList")},getDeptid:function(){return n["a"].get("/User/Get")},orderDel:function(t){return Object(n["a"])({method:"DELETE",url:"/EventManage/Delete",params:{eventId:t}})}}},b58d:function(t,e,a){"use strict";var n=a("4f05"),i=a.n(n);i.a},e453:function(t,e,a){},f508:function(t,e,a){"use strict";a("c5f6");var n=a("d255");e["a"]={EventStateLoad:function(){return n["a"].get("/EventStatus/GetStatusForInspection")},EventTypeAll:function(t,e,a,i){return a=a||"EventTypeName",i=i||"asc",n["a"].get("/EventType/Get",{params:{sort:String(a),ordering:String(i),num:Number(t),page:Number(e)}})},EventContentLoad:function(){return n["a"].get("/EventType/GetCommboboxList")},EventTypeAdd:function(t,e){return n["a"].post("/EventType/Post",{EventTypeName:String(t),ExecTime:Number(e)})},EventTypeEdit:function(t,e,a){return n["a"].put("/EventType/Put?eventTypeId="+Number(a),{EventTypeName:t,ExecTime:Number(e)})},EventTypeDel:function(t){return n["a"].delete("/EventType/Delete",{params:{eventTypeId:Number(t)}})}}}}]);
//# sourceMappingURL=chunk-32f869b0.4e458a2b.js.map