(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cfb62b86"],{"0a90":function(t,e,a){var n=a("63b6"),i=a("10ff");n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},"10ff":function(t,e,a){var n=a("e53d").parseFloat,i=a("a1ce").trim;t.exports=1/n(a("e692")+"-0")!==-1/0?function(t){var e=i(String(t),3),a=n(e);return 0===a&&"-"==e.charAt(0)?-0:a}:n},1520:function(t,e,a){"use strict";a("c5f6");var n=a("d255");e["a"]={DeptData:function(){return n["a"].get("/Department/GetUserComboboxList")},AdminNameData:function(t){return n["a"].get("/User/GetUserComboboxList",{params:{deptId:Number(t)}})},GetUserComboboxListNoDelete:function(t){return n["a"].get("/User/GetUserComboboxListNoDelete",{params:{deptId:Number(t)}})},GetPlanCycle:function(){return n["a"].get("/PlanCycle/GetCombobox")}}},"1af6":function(t,e,a){var n=a("63b6");n(n.S,"Array",{isArray:a("9003")})},"3d25":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table_style formItem",class:{flexible:t.flexible}},[a("TableFormTitle",{attrs:{titleName:"巡检计划管理",flexible:t.flexible},on:{"update:flexible":function(e){t.flexible=e}}}),a("el-form",{attrs:{"label-width":"48px"}},[a("el-row",[a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:16}},[t.$options.filters.btnTree("/api/PlanArea/Get",t.$route.meta.iFunID)?a("el-button",{staticClass:"my-allArea",attrs:{size:"mini"},on:{click:t.showAllArea}},[t._v("全部区域")]):t._e(),t.$options.filters.btnTree("clear",t.$route.meta.iFunID)?a("el-button",{staticClass:"my-closeChoose",attrs:{size:"mini"},on:{click:t.closeAllArea}},[t._v("关闭选择")]):t._e()],1)],1),a("div",{staticClass:"table-btn-control"},[a("el-row",{attrs:{type:"flex",justify:"start"}},[t.$options.filters.btnTree("/api/PlanArea/Post",t.$route.meta.iFunID)?a("el-button",{staticClass:"my-tableout",attrs:{plain:"",size:"mini"},on:{click:t.addRow}},[a("i",{staticClass:"iconfont icon-xinzeng"}),t._v("新增\n        ")]):t._e(),t.$options.filters.btnTree("/api/PlanArea/Put",t.$route.meta.iFunID)?a("el-button",{staticClass:"my-tableout",attrs:{size:"mini"},on:{click:t.editRow}},[a("i",{staticClass:"iconfont icon-bianji"}),t._v("编辑\n        ")]):t._e(),t.$options.filters.btnTree("/api/PlanArea/Delete",t.$route.meta.iFunID)?a("el-button",{staticClass:"my-tableout",attrs:{size:"mini"},on:{click:t.DelectRow}},[a("i",{staticClass:"iconfont icon-shanchu"}),t._v("删除\n        ")]):t._e()],1)],1)],1),a("InsTable",{ref:"InsPlanTable",attrs:{layerListName:"Ins_RegionalManagement_Columns",tableHeight:"calc(100vh - 584px)",columnListData:t.squareQueryRawTableData,loading:t.loading,pageSize:t.currentPageSize,pageNumber:t.currentPageNumber,dataTotal:t.squareQueryTotal,layeName:"RegionalManagement",tableIndex:t.tableIndex,addShow:t.$options.filters.btnTree("/api/PointArea/Post",t.$route.meta.iFunID)},on:{"update:loading":function(e){t.loading=e},"update:pageSize":function(e){t.currentPageSize=e},"update:pageNumber":function(e){t.currentPageNumber=e},"update:tableIndex":function(e){t.tableIndex=e},tableDbClick:t.tableDbClick,GetData:t.GetData,currentChange:t.currentChange,deltableItem:t.deltableItem,tableClick:t.tableClick,addPoint:t.addPoint}}),a("bottom-table",{ref:"bottomTable",attrs:{currentRow:t.currentRow,layerDataValue:"RegionalManagement",editShow:t.$options.filters.btnTree("/api/PointArea/Put",t.$route.meta.iFunID),delShow:t.$options.filters.btnTree("/api/PointArea/Delete",t.$route.meta.iFunID)},on:{tableClick:t.tableClick,endDrawRoint:t.endDrawRoint,tableDbClick:t.tableDbClick}}),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"myDialog insPlanDialog",attrs:{center:"",title:t.dialogType,visible:t.dialogVisible,customClass:"el_add_dialog","before-close":t.closeDialogBtn,"modal-append-to-body":!1,modal:!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{"label-width":"86px",size:"small"}},[a("el-form-item",{attrs:{label:"名称："}},[a("el-input",{attrs:{placeholder:t.请输入标题},model:{value:t.PlanAreaName,callback:function(e){t.PlanAreaName=e},expression:"PlanAreaName"}})],1),a("el-form-item",{attrs:{label:"责任部门："}},[a("el-select",{attrs:{placeholder:"请选择管理人"},on:{change:t.onChangeDept},model:{value:t.DeptIdSelect,callback:function(e){t.DeptIdSelect=e},expression:"DeptIdSelect"}},t._l(t.deptData,function(t){return a("el-option",{key:t.iDeptID,attrs:{label:t.cDepName,value:t.iDeptID}})}),1)],1),a("el-form-item",{attrs:{label:"责任人："}},[a("el-select",{attrs:{placeholder:"择管理人名称"},model:{value:t.adminNameDataSelect,callback:function(e){t.adminNameDataSelect=e},expression:"adminNameDataSelect"}},t._l(t.adminNameData,function(t){return a("el-option",{key:t.iAdminID,attrs:{label:t.cAdminName,value:t.iAdminID}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"my-dialog-cancel",attrs:{size:"mini"},on:{click:t.closeDialogBtn}},[t._v("取 消")]),a("el-button",{staticClass:"my-dialog-submit",attrs:{size:"mini"},on:{click:t.SubmitArea}},[t._v("确认")])],1)],1)],1)},i=[],o=a("768b"),r=a("f499"),s=a.n(r),l=(a("a481"),a("c5f6"),a("2ef0")),u=a.n(l),c=a("aa97"),m=a("f44c"),h=a("1520"),b=a("1b9e"),d=a("1d1f"),f=a("2368"),D=a("a486"),g={components:{TableFormTitle:d["a"],InsTable:f["a"],BottomTable:D["a"]},data:function(){return{loading:!0,squareQueryRawTableData:[],dataTotal:1,currentPageNumber:1,currentPageSize:50,currentRow:null,flexible:!1,tableIndex:[],dialogType:"",dialogVisible:!1,DoneDrawPolygon:void 0,allAreaData:[],allAreaGeoTextData:[],allAreaNamesData:[],AreaArrayStandby:"",isShowAllArea:!0,allAreaPoint:[],pointObjArray:[],deptData:[],adminNameDataSelect:0,PlanAreaName:"",DeptIdSelect:0,adminNameData:[]}},created:function(){this.GetData(),this.$bus.on("resteRegionalData",this.GetData)},beforeDestroy:function(){this.$bus.off("resteRegionalData",this.GetData),this.$bus.emit("removeInteractions"),this.isShowAllArea=!0,this.$bus.emit("CloseModifyInteraction"),this.$bus.emit("onPointermoveControl"),this.$bus.emit("setBusinessLayerGroupVisible",!1),this.DoneDrawPolygon instanceof Function&&this.DoneDrawPolygon()},mounted:function(){},watch:{allAreaPoint:function(){this.$bus.emit("setPointOnMap",this.allAreaPoint,!1,function(){},"RegionalPoint",this.pointObjArray)}},methods:{currentChange:function(t){this.currentRow=t},GetData:function(t,e){var a=this;this.loading=!0,"number"==typeof t&&(this.currentPageNumber=t),"number"==typeof e&&(this.currentPageSize=e),c["a"].RegionalData(this.currentPageSize,this.currentPageNumber).then(function(t){a.loading=!1,a.squareQueryRawTableData=t.data.Data.Result,a.squareQueryTotal=t.data.Data.TotalRows,a.allAreaData=t.data.Data.Result,a.isShowAllArea&&a.showAllArea()})},showAllArea:function(){var t=this;this.$bus.emit("CloseModifyInteraction"),this.allAreaGeoTextData=[],this.allAreaNamesData=[];for(var e=0;e<this.allAreaData.length;e++){try{JSON.parse(this.allAreaData[e].GeoText)}catch(i){continue}this.allAreaGeoTextData.push(JSON.parse(this.allAreaData[e].GeoText)),this.allAreaNamesData.push(this.allAreaData[e].PlanAreaName)}for(var a=u.a.map(this.allAreaData,function(t){return t.PlanAreaId}),n=0;n<a.length;n++)m["a"].GetPointArea(20,1,a[n]).then(function(e){u.a.map(e.data.Data.Result,function(e){t.allAreaPoint.push([Number(e.PointX),Number(e.PointY)]),t.pointObjArray.push({PointName:e.PointName})})});this.$bus.emit("setPolygonOnMap",this.allAreaGeoTextData,this.allAreaNamesData,!1,function(e){t.$bus.emit("setBusinessLayerGroupVisible",!0)})},closeAllArea:function(){this.$bus.emit("CloseModifyInteraction"),this.$bus.emit("setPolygonOnMap",[],[],!1,function(t){}),this.$bus.emit("setBusinessLayerGroupVisible",!1),this.$bus.emit("onPointermoveControl")},DelectRow:function(){var t=this;this.$bus.emit("CloseModifyInteraction"),this.$bus.emit("onPointermoveControl"),this.currentRow?this.$confirm("确认删除？").then(function(e){c["a"].DeletePlanArea(t.currentRow.PlanAreaId).then(function(e){t.GetData(),t.$message({type:"success",message:"删除成功！",showClose:!0}),t.tableClick()})}).catch(function(e){t.$message({type:"info",message:"已取消删除！",showClose:!0})}):this.$message({type:"warning",message:"请选择要删除的行!",showClose:!0})},addRow:function(){var t=this;this.$bus.emit("OffPointermoveControl"),this.$bus.emit("removeInteractions"),this.$bus.emit("addInteractions","Polygon",!1,function(e){t.$bus.emit("setOverlay",e[0][0],document.getElementById("popup"),"添加区域",function(e){""!=e.AreaName.replace(/(^\s*)|(\s*$)/g,"")?c["a"].AddPlanArea(e.AreaName,s()(e.dialogData[0]),e.DeptId,e.adminName).then(function(e){t.GetData(),t.$bus.emit("cancelBtn"),t.$bus.emit("setTempLayerGroupVisible",!1),t.$bus.emit("onPointermoveControl"),t.$message({type:"success",message:"区域添加成功!",showClose:!0})}):t.$message({type:"warning",message:"区域名称不能为空!",showClose:!0})})})},editRow:function(t){var e=this;this.$bus.emit("onPointermoveControl"),this.$bus.emit("CloseModifyInteraction"),this.currentRow?(this.AreaArrayStandby=this.currentRow.GeoText,this.isModifyArea(!0),this.isShowAllArea=!1,Object(b["c"])(this.currentRow.GeoText,function(t){e.$bus.emit("setCenter",t)})):this.$message({type:"warning",message:"请选择要编辑的区域!",showClose:!0})},tableDbClick:function(t){var e=this;this.$bus.emit("onPointermoveControl"),this.$bus.emit("CloseModifyInteraction"),this.DoneDrawPolygon instanceof Function&&this.DoneDrawPolygon(),this.isModifyArea(!1),Object(b["c"])(this.currentRow.GeoText,function(t){e.$bus.emit("setCenter",t)})},isModifyArea:function(t){var e=this;try{JSON.parse(this.currentRow.GeoText)}catch(n){return void this.$message({type:"error",message:"您选择了未知错误的区域!!!",showClose:!0})}this.DoneDrawPolygon instanceof Function&&this.DoneDrawPolygon();var a=[JSON.parse(this.currentRow.GeoText)];this.AreaArrayStandby=this.currentRow.GeoText,t?this.editDialogFnc(a):this.$bus.emit("setPolygonOnMap",a,[this.currentRow.PlanAreaName],t,function(t){}),m["a"].GetPointArea(20,1,this.currentRow.PlanAreaId).then(function(t){var a=[],n=[];u.a.map(t.data.Data.Result,function(t){a.push([Number(t.PointX),Number(t.PointY)]),n.push({PointName:t.PointName})}),e.$bus.emit("onPointermoveControl"),e.$bus.emit("setPointOnMap",a,!1,function(t,e){},"RegionalPoint",n)})},editDialogFnc:function(t){var e=this;this.$bus.emit("setBusinessLayerGroupVisible",!0),this.dialogType="编辑区域",this.axiosDeptData(),this.PlanAreaName=this.currentRow.PlanAreaName,this.DeptIdSelect=this.currentRow.DeptId,this.adminNameDataSelect=this.currentRow.PersonId,this.axiosAdminNameData(this.currentRow.DeptId),this.dialogVisible=!0,this.$bus.emit("setPolygonOnMap",t,[this.currentRow.PlanAreaName],!0,function(t,a){e.AreaArray=t,e.DoneDrawPolygon=a})},SubmitArea:function(){var t=this,e=void 0;if(u.a.isEmpty(this.AreaArray))e=this.AreaArrayStandby;else{var a=Object(o["a"])(this.AreaArray,1),n=a[0];e=s()(n)}this.dialogVisible=!1,""!=this.PlanAreaName.replace(/(^\s*)|(\s*$)/g,"")?c["a"].EditPlanArea(this.currentRow.PlanAreaId,this.PlanAreaName,e,this.DeptIdSelect,this.adminNameDataSelect).then(function(){t.isShowAllArea=!0,t.GetData(),void 0!=t.AreaArray&&t.DoneDrawPolygon()}):this.$message({type:"warning",message:"区域名称不能为空!",showClose:!0})},closeDialogBtn:function(){this.DoneDrawPolygon instanceof Function&&this.DoneDrawPolygon(),this.dialogVisible=!1,this.$bus.emit("onPointermoveControl"),this.$bus.emit("setEditFeatureState",!1)},axiosDeptData:function(){var t=this;h["a"].DeptData().then(function(e){t.deptData=e.data.Data.Result})},onChangeDept:function(t){var e=this;this.axiosAdminNameData(t,function(t){t.length>0?e.adminNameDataSelect=t[0].iAdminID:e.adminNameDataSelect="无数据"})},axiosAdminNameData:function(t,e){var a=this;t&&h["a"].AdminNameData(t).then(function(t){a.adminNameData=t.data.Data.Result,e&&e instanceof Function&&e(t.data.Data.Result)})},tableClick:function(t){t=t||{PlanAreaId:null},this.$refs.bottomTable.GetData(t.PlanAreaId),t&&this.$refs.InsPlanTable.setCurrentRow(t)},addPoint:function(t){this.$refs.bottomTable.addPoint(t.row)}}},p=g,P=a("2877"),y=Object(P["a"])(p,n,i,!1,null,null,null);y.options.__file="RegionalManagement.vue";var A=y.exports;e["default"]=A},"469f":function(t,e,a){a("6c1c"),a("1654"),t.exports=a("7d7b")},"59ad":function(t,e,a){t.exports=a("7be7")},"5d73":function(t,e,a){t.exports=a("469f")},"768b":function(t,e,a){"use strict";var n=a("a745"),i=a.n(n);function o(t){if(i()(t))return t}var r=a("5d73"),s=a.n(r);function l(t,e){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=s()(t);!(n=(r=l.next()).done);n=!0)if(a.push(r.value),e&&a.length===e)break}catch(u){i=!0,o=u}finally{try{n||null==l["return"]||l["return"]()}finally{if(i)throw o}}return a}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(t,e){return o(t)||l(t,e)||u()}a.d(e,"a",function(){return c})},"7be7":function(t,e,a){a("0a90"),t.exports=a("584a").parseFloat},"7d7b":function(t,e,a){var n=a("e4ae"),i=a("7cd6");t.exports=a("584a").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},a1ce:function(t,e,a){var n=a("63b6"),i=a("25eb"),o=a("294c"),r=a("e692"),s="["+r+"]",l="​",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),m=function(t,e,a){var i={},s=o(function(){return!!r[t]()||l[t]()!=l}),u=i[t]=s?e(h):r[t];a&&(i[a]=u),n(n.P+n.F*s,"String",i)},h=m.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=m},a486:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{border:""}},[a("el-table",{attrs:{stripe:"",border:"",data:t.squareQueryRawTableData,"highlight-current-row":"",height:t.layerHeight},on:{"cell-dblclick":t.bottomTableDbClick,"current-change":t.handleCurrentChange,"row-click":t.tableClick}},[t._l(t.columnList,function(t){return a("el-table-column",{key:t.field,attrs:{prop:t.field,width:t.width,fixed:t.fixed,label:t.text,align:t.align,sortable:t.sortable}})}),t.editShow||t.delShow?a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.editShow?a("el-button",{staticClass:"my-table-edit",attrs:{size:"mini"},on:{click:function(a){t.editPoint(e.row)}}},[a("i",{staticClass:"iconfont icon-bianji"})]):t._e(),t.delShow?a("el-button",{staticClass:"my-table-del",attrs:{size:"mini"},on:{click:function(a){t.onDelectClick(e.row)}}},[a("i",{staticClass:"iconfont icon-shanchu"})]):t._e()]}}])}):t._e()],2),a("el-pagination",{attrs:{"current-page":t.currentPageNumber,"page-sizes":[10,20,30],"page-size":t.currentPageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:t.squareQueryTotal},on:{"size-change":t.onPageSizeChange,"current-change":t.onPageChange,"update:currentPage":function(e){t.currentPageNumber=e}}})],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"myDialog insPlanDialog",attrs:{title:t.layerTitle,visible:t.editButtomVisible,width:"400","before-close":t.handleClose,customClass:"el_add_dialog","modal-append-to-body":!1,modal:!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editButtomVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"名称：","label-width":"56px"}},[a("el-input",{attrs:{size:"mini",placeholder:t.请输入标题},model:{value:t.impAreaName,callback:function(e){t.impAreaName=e},expression:"impAreaName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"my-dialog-cancel",attrs:{size:"mini"},on:{click:t.handleClose}},[t._v("取 消")]),a("el-button",{staticClass:"my-dialog-submit",attrs:{size:"mini"},on:{click:t.getPointArray}},[t._v("确认")])],1)],1)],1)},i=[],o=a("59ad"),r=a.n(o),s=(a("a481"),a("768b")),l=(a("c5f6"),a("2ef0"),a("bc3a"),a("5e4b")),u=a("f44c"),c=a("c7fc"),m={data:function(){return{layerTitle:"修改关键点",bottomRow:"",parentColum:"",squareQueryRawTableData:[],squareQueryTotal:1,editButtomVisible:!1,impAreaName:"",PlanLineDetaiIdSelect:void 0,PointId:0,PointArray:[],PointArrayStandby:[],defPlanAreaId:"",currentPageNumber:1,currentPageSize:10,paginatedTableData:[],bottomType:"",DoneDrawPoint:void 0}},created:function(){this.$bus.on("resteRegionalPointData",this.resteRegionalPointData)},beforeDestroy:function(){this.$bus.off("resteRegionalPointData",this.resteRegionalPointData)},watch:{layerDataValue:function(){this.squareQueryRawTableData=[]}},props:["layerDataValue","currentRow","delShow","editShow"],computed:{columnList:function(){return"RouteManagement"==this.layerDataValue?l["Ins_RouteManageBottom_Columns"]:l["Ins_RegionalManagementBottom_Columns"]},layerHeight:function(){return"RouteManagement"==this.layerDataValue?"275px":"278px"}},methods:{bottomTableDbClick:function(t){var e;e="RegionalManagement"==this.layerDataValue?[Number(t.PointX),Number(t.PointY)]:[Number(t.X),Number(t.Y)],this.$bus.emit("setCenter",e),this.drawPoint([e],!1)},drawPoint:function(t,e){var a=this;e=e||!0,this.$bus.emit("setPointOnMap",t,e,function(t,e){a.PointArray=t,a.DoneDrawPoint=e})},GetData:function(t){null!=t?(this.parentColum=t,"RouteManagement"==this.layerDataValue?this.RoutePlanGet(t):this.GetPointArea(t)):this.squareQueryRawTableData=[]},GetPointArea:function(t){var e=this;u["a"].GetPointArea(this.currentPageSize,this.currentPageNumber,t).then(function(t){e.squareQueryRawTableData=t.data.Data.Result,e.squareQueryTotal=t.data.Data.TotalRows})},editPoint:function(t){var e=this;this.$bus.emit("onPointermoveControl"),this.$bus.emit("CloseModifyInteraction");var a=[];"RegionalManagement"==this.layerDataValue?(this.bottomType="编辑区域关键点",a=[[Number(t.PointX),Number(t.PointY)]],this.PointArray=a,this.editButtomVisible=!0,this.impAreaName=t.PointName,this.$bus.emit("setPointOnMap",a,!0,function(t,a){e.PointArray=t,e.DoneDrawPoint=a,e.$emit("endDrawRoint",a)})):(this.bottomType="编辑路线关键点",a=[[Number(t.X),Number(t.Y)]],this.PointArray=a,this.editButtomVisible=!0,this.impAreaName=t.ImportPointName,this.$bus.emit("setPointOnMap",a,!0,function(t,a){e.PointArray=t,e.DoneDrawPoint=a,e.$emit("endDrawRoint",a)}));var n=a,i=Object(s["a"])(n,1),o=i[0];this.$bus.emit("setCenter",o)},getPointArray:function(){var t=this;this.impAreaName||this.$message({type:"warning",message:"请输入正确的名称",showbtn:!0}),"编辑区域关键点"==this.bottomType?u["a"].EditMapPlane(this.bottomRow.PointId,this.impAreaName,this.PointArray[0],this.PointArray[1]).then(function(e){t.$emit("tableClick",t.currentRow),t.$emit("tableDbClick",t.currentRow),t.editButtomVisible=!1,t.DoneDrawPoint instanceof Function&&t.DoneDrawPoint()}):c["a"].EditPlanLineDetail(this.bottomRow.PlanLineDetaiId,this.bottomRow.PlanLineId,this.PointArray[0],this.PointArray[1],0,this.impAreaName).then(function(e){t.$emit("tableClick",t.currentRow),t.$emit("tableDbClick",t.currentRow),t.editButtomVisible=!1,t.DoneDrawPoint instanceof Function&&t.DoneDrawPoint()})},onDelectClick:function(t){var e=this;this.$bus.emit("onPointermoveControl");t.PointId;"RegionalManagement"==this.layerDataValue?this.$confirm("确定要删除【"+t.PlanAreaName+"-"+t.PointName+"】关键点","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){u["a"].DeletePoint(t.PointId).then(function(t){e.GetData(e.parentColum),e.$emit("tableDbClick",e.parentColum),e.$message({type:"success",message:"删除成功!"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})}):this.DeletePlanLineDetail()},DeletePlanLineDetail:function(){var t=this;this.$confirm("确定要删除路线关键点","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){c["a"].DeletePlanLineDetail(t.bottomRow.PlanLineDetaiId).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.PlanLineDetaiIdSelect=void 0,t.GetData(t.parentColum),t.$emit("tableDbClick",t.currentRow)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},RoutePlanGet:function(t){var e=this;c["a"].GetPlanLineDetail(15,1,t).then(function(t){e.squareQueryRawTableData=t.data.Data.Result,e.squareQueryTotal=t.data.Data.TotalRows})},addPoint:function(t,e){var a=this;this.$bus.emit("OffPointermoveControl"),this.$bus.emit("removeInteractions"),this.$bus.emit("addInteractions","Point",!1,function(e){a.$bus.emit("setOverlay",e,document.getElementById("popup"),"添加关键点",function(n){""!=n.replace(/(^\s*)|(\s*$)/g,"")?(a.$bus.emit("onPointermoveControl"),"RegionalManagement"==a.layerDataValue?u["a"].AddNewPoint(e[0],e[1],n,t.PlanAreaId).then(function(e){a.$message({type:"success",message:"添加关键点成功!"}),a.$bus.emit("cancelBtn"),a.$emit("tableClick",t),a.$emit("tableDbClick",t)}):c["a"].AddPlanLineDetail(t.PlanLineId,e[0],e[1],0,n).then(function(e){a.$message({type:"success",message:"巡检路线关键点添加!"}),a.$bus.emit("cancelBtn"),a.$emit("tableClick",t),a.$emit("tableDbClick",t)})):a.$message({type:"warning",message:"关键点名称不能为空"})})})},loadData:function(){this.squareQueryRawTableData=[],this.squareQueryTotal=1},onPageChange:function(t){this.currentPageNumber=t,this.GetData(this.parentColum)},onPageSizeChange:function(t){this.currentPageSize=t,this.GetData(this.parentColum)},handleCurrentChange:function(t){this.bottomRow=t,this.$bus.emit("onPointermoveControl")},tableClick:function(t){this.$bus.emit("CloseModifyInteraction"),this.PointArrayStandby=[r()(t.PointX),r()(t.PointY)],"RouteManagement"!=this.layerDataValue?this.PointArray=[Number(t.PointX),Number(t.PointY)]:this.PointArray=[Number(t.X),Number(t.Y)],this.bottomRow=t,this.PlanLineDetaiIdSelect=t.PlanLineDetaiId},handleClose:function(){this.$bus.emit("CloseModifyInteraction"),this.impAreaName="",this.editButtomVisible=!1,this.$bus.emit("onPointermoveControl"),this.DoneDrawPoint instanceof Function&&this.DoneDrawPoint(),this.$bus.emit("setEditFeatureState",!1),this.$bus.emit("onPointermoveControl"),this.GetData(this.parentColum)},resteRegionalPointData:function(t){this.GetData(t)}}},h=m,b=a("2877"),d=Object(b["a"])(h,n,i,!1,null,null,null);d.options.__file="BottomTable.vue";e["a"]=d.exports},a745:function(t,e,a){t.exports=a("f410")},aa97:function(t,e,a){"use strict";a("c5f6");var n=a("d255");e["a"]={RegionalData:function(t,e,a,i){return t=t||50,e=e||1,a=a||"OperateAddTime",i=i||"desc",n["a"].get("/PlanArea/Get",{params:{num:Number(t),page:Number(e),sort:String(a),ordering:String(i)}})},AddPlanArea:function(t,e,a,i){return n["a"].post("/PlanArea/Post",{PlanAreaName:String(t),GeoText:String(e),DeptId:Number(a),PersonId:Number(i)})},EditPlanArea:function(t,e,a,i,o){return n["a"].put("/PlanArea/Put?PointId="+t,{PlanAreaId:Number(t),PlanAreaName:String(e),GeoText:String(a),DeptId:Number(i),PersonId:Number(o)})},DeletePlanArea:function(t){return n["a"].delete("/PlanArea/Delete",{params:{PointId:Number(t)}})}}},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-cfb62b86.028000f5.js.map