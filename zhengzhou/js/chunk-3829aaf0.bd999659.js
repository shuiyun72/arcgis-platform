(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3829aaf0"],{"26d3":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table_style"},[n("el-row",{staticClass:"modularWrapper",attrs:{type:"flex"}},[n("el-scrollbar",{staticStyle:{"min-width":"200px"}},[n("el-tree",{attrs:{"highlight-current":"",data:e.modularList,props:e.defaultProps,"default-expanded-keys":[this.nodeID],"node-key":"iFunID"},on:{"node-click":e.handleNodeClick}})],1),n("el-col",{staticClass:"table-flex-wraper"},[n("div",{staticClass:"table-btn-control",staticStyle:{border:"none"}},[n("el-row",{attrs:{type:"flex",justify:"strat"}},[e.$options.filters.btnTree("/api/Function/Post",e.$route.meta.iFunID)?n("el-button",{staticClass:"my-tableout",attrs:{plain:"",size:"mini"},on:{click:e.addModular}},[n("i",{staticClass:"iconfont icon-xinzeng"}),e._v("新增\n          ")]):e._e(),e.$options.filters.btnTree("/api/Function/Put",e.$route.meta.iFunID)?n("el-button",{staticClass:"my-tableout",attrs:{size:"mini"},on:{click:e.editModular}},[n("i",{staticClass:"iconfont icon-bianji"}),e._v("编辑\n          ")]):e._e(),e.$options.filters.btnTree("/api/Function/Delete",e.$route.meta.iFunID)?n("el-button",{staticClass:"my-tableout",attrs:{size:"mini"},on:{click:e.delModular}},[n("i",{staticClass:"iconfont icon-shanchu"}),e._v("删除\n          ")]):e._e()],1)],1),n("SysTable",{attrs:{tableData:e.tableData,loading:e.loading,layerListName:"Modular_Columns",paginationShow:!1,modularDialog:!0},on:{currentChange:e.currentChange,modularDialogOpen:e.modularDialogOpen}})],1)],1),n("el-dialog",{staticClass:"myDialog",attrs:{title:e.dialogtype?"修改模块":"新增模块",visible:e.dialogVisible,width:"300","before-close":e.handleClose,customClass:"el_add_dialog"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"formDialog",attrs:{"label-width":"100px",size:"small",rules:e.rules,model:e.formValue}},[n("el-form-item",{attrs:{label:"功能名称：",prop:"cFunName"}},[n("el-input",{attrs:{placeholder:"请输入功能名称"},model:{value:e.formValue.cFunName,callback:function(t){e.$set(e.formValue,"cFunName",t)},expression:"formValue.cFunName"}})],1),n("el-form-item",{attrs:{label:"功能URl：",prop:"cFunUrl"}},[n("el-input",{attrs:{placeholder:"请输入功能URl"},model:{value:e.formValue.cFunUrl,callback:function(t){e.$set(e.formValue,"cFunUrl",t)},expression:"formValue.cFunUrl"}})],1),n("el-form-item",{attrs:{label:"系统类型："}},[n("el-select",{attrs:{disabled:""},model:{value:e.formValue.System_Type,callback:function(t){e.$set(e.formValue,"System_Type",t)},expression:"formValue.System_Type"}},e._l(e.typeListArr,function(e){return n("el-option",{key:e.iFunID,attrs:{label:e.cFunName,value:e.iFunID}})}),1)],1),n("el-form-item",{attrs:{label:"icon名称：",prop:"cFunIcon"}},[n("el-input",{attrs:{placeholder:"请输入icon名称"},model:{value:e.formValue.cFunIcon,callback:function(t){e.$set(e.formValue,"cFunIcon",t)},expression:"formValue.cFunIcon"}})],1),n("el-form-item",{attrs:{label:"排序："}},[n("el-input-number",{attrs:{"controls-position":"right",label:"描述文字"},model:{value:e.formValue.iFunOrder,callback:function(t){e.$set(e.formValue,"iFunOrder",t)},expression:"formValue.iFunOrder"}})],1),n("el-form-item",{attrs:{label:"是否显示："}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.formValue.iFunMenuIsShow,callback:function(t){e.$set(e.formValue,"iFunMenuIsShow",t)},expression:"formValue.iFunMenuIsShow"}})],1),n("el-form-item",{attrs:{label:"点击类型："}},[n("el-radio-group",{model:{value:e.formValue.FunctionType,callback:function(t){e.$set(e.formValue,"FunctionType",t)},expression:"formValue.FunctionType"}},[n("el-radio",{attrs:{label:1}},[e._v("页面")]),n("el-radio",{attrs:{label:2}},[e._v("按钮")])],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"my-dialog-cancel",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{staticClass:"my-dialog-submit",attrs:{loading:e.sunBtnLoad},on:{click:e.editFormSubmit}},[e._v("确 定")])],1)],1)],1)},a=[],r=(n("28a5"),n("c5f6"),n("ac6a"),n("bd86")),l=n("99db"),o=n("ccc3"),u={components:{SysTable:o["a"]},data:function(){return Object(r["a"])({rules:{cFunName:[{required:!0,message:"请输入功能名称",trigger:"blur"}]},modularList:[],defaultProps:{children:"children",label:"cFunName"},FatherList:[],tableData:[],currentRow:null,nodeID:-1,System_Type:1,dialogVisible:!1,dialogtype:0,typeList:{0:"手机app",1:"B/S 显示",4:"C/S 显示"},typeListArr:[{cFunName:"手机app",iFunID:0},{cFunName:"B/S 显示",iFunID:1},{cFunName:"C/S 显示",iFunID:4}],formValue:{cFunName:"",cFunUrl:"",iFunOrder:void 0,iFunMenuIsShow:!0,System_Type:1,FunctionType:1,cFunIcon:void 0},loading:!0,sunBtnLoad:!1},"sunBtnLoad",!1)},created:function(){this.getModularList()},methods:{getModularList:function(){var e=this;this.loading=!0,l["a"].getModular().then(function(t){e.FatherList={};var n=t.data.Data.Result;_.forEach(n,function(t){e.FatherList[t.System_Type]||(e.FatherList[t.System_Type]={iFunID:"0#"+t.System_Type},e.FatherList[t.System_Type].cFunName=e.typeList[t.System_Type],e.FatherList[t.System_Type],e.FatherList[t.System_Type].System_Type=t.System_Type),e.FatherList[t.System_Type][t.iFunFatherID]?e.FatherList[t.System_Type][t.iFunFatherID].push(t):e.FatherList[t.System_Type][t.iFunFatherID]=[t]});var i=_.cloneDeep(e.FatherList);e.modularList=[{iFunID:-1,cFunName:"智慧水务管理系统",children:[]}],_.forEach(i,function(t,n){e.ModularSerialize([t],t.System_Type),e.modularList[0].children.push(t)}),e.$store.dispatch("system/setState",{name:"modular",value:e.modularList});var a=_.isString(e.nodeID)?Number(e.nodeID.split("#")[0]):e.nodeID;e.tableData=-1===a?e.typeListArr:e.FatherList[e.System_Type][a],e.loading=!1}).catch(function(){e.loading=!1,e.$message({type:"error",message:"获取数据失败",showClose:!0})})},ModularSerialize:function(e,t){var n=this;_.map(e,function(e){var i=_.isString(e.iFunID)?Number(e.iFunID.split("#")[0]):e.iFunID;n.FatherList[t][i]&&(e.children=n.FatherList[t][i],n.ModularSerialize(n.FatherList[t][i],t))})},handleNodeClick:function(e){this.tableData=e.children,this.nodeID=e.iFunID,this.System_Type=e.System_Type},currentChange:function(e){this.currentRow=e},delModular:function(){var e=this;this.currentRow?this.$confirm("确定删除么").then(function(){_.isString(e.currentRow.iFunID)?e.$message({type:"error",message:"禁止删除系统分类",showClose:!0}):(e.loading=!0,l["a"].delModular(e.currentRow.iFunID).then(function(){e.loading=!1,e.$message({type:"success",message:"成功删除数据",showClose:!0}),e.getModularList()}).catch(function(){e.$message({type:"error",message:"删除数据失败",showClose:!0})}))}).catch(function(){e.$message({type:"warning",message:"取消删除数据",showClose:!0})}):this.$message({type:"warning",message:"请选择需要删除的数据",showClose:!0})},editModular:function(){this.currentRow?(this.formValue=_.assign({},this.currentRow),this.formValue.iFunMenuIsShow=Boolean(this.formValue.iFunMenuIsShow),this.dialogVisible=!0,this.dialogtype=1):this.$message({type:"warning",message:"请选择需要编辑的数据",showClose:!0})},addModular:function(){this.dialogVisible=!0,this.dialogtype=0,this.formValue={cFunName:"",cFunUrl:"",iFunOrder:1,iFunMenuIsShow:!0,System_Type:this.System_Type,FunctionType:1,cFunIcon:void 0},this.formValue.iFunFatherID=this.nodeID},handleClose:function(e){e()},editFormSubmit:function(){var e=this;this.$refs.formDialog.validate(function(t){if(!t)return!1;e.sunBtnLoad=!0,e.dialogtype?l["a"].editModular(e.formValue).then(function(t){e.dialogVisible=!1,e.sunBtnLoad=!1,e.getModularList()}).catch(function(){e.dialogVisible=!1,e.sunBtnLoad=!1,e.$message({type:"error",message:"编辑数据失败，请重试"})}):l["a"].addModular(e.formValue).then(function(t){e.sunBtnLoad=!1,e.dialogVisible=!1,e.getModularList()}).catch(function(){e.sunBtnLoad=!1,e.dialogVisible=!1,e.$message({type:"error",message:"新增数据失败，请重试"})})})}}},s=u,c=n("2877"),d=Object(c["a"])(s,i,a,!1,null,null,null);d.options.__file="Modular.vue";var f=d.exports;t["default"]=f},"28a5":function(e,t,n){"use strict";var i=n("aae3"),a=n("cb7c"),r=n("ebd6"),l=n("0390"),o=n("9def"),u=n("5f1b"),s=n("520a"),c=n("79e5"),d=Math.min,f=[].push,m="split",p="length",g="lastIndex",h=4294967295,F=!c(function(){RegExp(h,"y")});n("214f")("split",2,function(e,t,n,c){var b;return b="c"=="abbc"[m](/(b)*/)[1]||4!="test"[m](/(?:)/,-1)[p]||2!="ab"[m](/(?:ab)*/)[p]||4!="."[m](/(.?)(.?)/)[p]||"."[m](/()()/)[p]>1||""[m](/.?/)[p]?function(e,t){var a=String(this);if(void 0===e&&0===t)return[];if(!i(e))return n.call(a,e,t);var r,l,o,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,m=void 0===t?h:t>>>0,F=new RegExp(e.source,c+"g");while(r=s.call(F,a)){if(l=F[g],l>d&&(u.push(a.slice(d,r.index)),r[p]>1&&r.index<a[p]&&f.apply(u,r.slice(1)),o=r[0][p],d=l,u[p]>=m))break;F[g]===r.index&&F[g]++}return d===a[p]?!o&&F.test("")||u.push(""):u.push(a.slice(d)),u[p]>m?u.slice(0,m):u}:"0"[m](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,i){var a=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,a,i):b.call(String(a),n,i)},function(e,t){var i=c(b,e,this,t,b!==n);if(i.done)return i.value;var s=a(e),f=String(this),m=r(s,RegExp),p=s.unicode,g=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(F?"y":"g"),y=new m(F?s:"^(?:"+s.source+")",g),x=void 0===t?h:t>>>0;if(0===x)return[];if(0===f.length)return null===u(y,f)?[f]:[];var S=0,v=0,I=[];while(v<f.length){y.lastIndex=F?v:0;var _,D=u(y,F?f:f.slice(v));if(null===D||(_=d(o(y.lastIndex+(F?0:v)),f.length))===S)v=l(f,v,p);else{if(I.push(f.slice(S,v)),I.length===x)return I;for(var w=1;w<=D.length-1;w++)if(I.push(D[w]),I.length===x)return I;v=S=_}}return I.push(f.slice(S)),I}]})},"454f":function(e,t,n){n("46a7");var i=n("584a").Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},"46a7":function(e,t,n){var i=n("63b6");i(i.S+i.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"85f2":function(e,t,n){e.exports=n("454f")},"99db":function(e,t,n){"use strict";n("c5f6");var i=n("0f1a");t["a"]={getModular:function(){return i["a"].get("/Function/Get")},delModular:function(e){return i["a"].delete("/Function/Delete",{params:{iFunId:Number(e)}})},addModular:function(e){return i["a"].post("/Function/Post",{System_Type:Number(e.System_Type),FunctionType:Number(e.FunctionType),cFunName:e.cFunName,cFunUrl:e.cFunUrl,iFunFatherID:Number(e.iFunFatherID),iFunMenuIsShow:Number(e.iFunMenuIsShow),iFunOrder:Number(e.iFunOrder),cFunIcon:e.cFunIcon})},editModular:function(e){return i["a"].put("/Function/Put",{iFunID:Number(e.iFunID),System_Type:Number(e.System_Type),FunctionType:Number(e.FunctionType),cFunName:e.cFunName,cFunUrl:e.cFunUrl,iFunFatherID:Number(e.iFunFatherID),iFunMenuIsShow:Number(e.iFunMenuIsShow),iFunOrder:Number(e.iFunOrder),cFunIcon:e.cFunIcon})}}},bd86:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("85f2"),a=n.n(i);function r(e,t,n){return t in e?a()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},ccc3:function(e,t,n){"use strict";var i={};n.r(i),n.d(i,"DeptManage_Columns",function(){return l}),n.d(i,"UserManage_Columns",function(){return o}),n.d(i,"Modular_Columns",function(){return s}),n.d(i,"RoleManage_Columns",function(){return c}),n.d(i,"AppUpload_Columns",function(){return d});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-contain-wrapper"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"outDataSerchExcel exportTable",attrs:{stripe:"",border:"",height:"100%",data:e.tableData,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[e._l(e.columnList,function(t){return[t.template?n("el-table-column",{key:t.text,attrs:{fit:"true",prop:t.field,label:t.text,width:t.width,align:t.align,sortable:t.sortable,formatter:t.formatter},scopedSlots:e._u([{key:"default",fn:function(i){var a=i.row;return[n("span",{domProps:{innerHTML:e._s(t.template(a))}})]}}])}):n("el-table-column",{key:t.text,attrs:{fit:"true",prop:t.field,label:t.text,width:t.width,align:t.align,sortable:t.sortable,formatter:t.formatter}})]}),e.$options.filters.btnTree("/api/FunPurview/RefreshFunPurview",e.$route.meta.iFunID)&&e.modularDialog?n("el-table-column",{attrs:{prop:"iRoleID",label:"功能权限",align:"center",fixed:"right",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",{staticClass:"my-detail",on:{click:function(t){e.modularDialogOpen(i)}}},[e._v("功能权限")])]}}])}):e._e()],2),e.paginationShow?n("el-pagination",{attrs:{"current-page":e.pageNumber,"page-size":e.pageSize,"page-sizes":[1,50,100,200],"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},on:{"size-change":e.onPageSizeChange,"current-change":e.onPageChange,"update:currentPage":function(t){e.pageNumber=t}}}):e._e()],1)},r=[],l=[{field:"cDepName",text:"部门名称",align:"center",fixed:!1},{field:"cDepTel",text:"电话",align:"center",fixed:!1},{field:"cDepEmail",text:"邮件",align:"center",fixed:!1}],o=[{field:"cAdminName",text:"姓名",align:"center",fixed:!1},{field:"CJobNumber",text:"工号",align:"center",fixed:!1},{field:"cDepName",text:"部门",align:"center",fixed:!1},{field:"cRoleName",text:"岗位",align:"center",fixed:!1},{field:"cAdminSex",text:"性别",align:"center",fixed:!1},{field:"cAdminTel",text:"电话",align:"center",fixed:!1},{field:"cAdminEmail",text:"邮件",align:"center",fixed:!1},{field:"iIsLocked",text:"是否锁定",formatter:function(e,t,n,i){return n?"是":"否"},align:"center",fixed:!1},{field:"dExpireDate",text:"过期日期",align:"center",fixed:!1},{field:"iIsAllowChangePWD",text:"密码修改",formatter:function(e,t,n,i){return n?"允许":"不允许"},align:"center",fixed:!1}],u={1:"B/S 显示",3:"手机app",4:"C/S 显示"},s=[{field:"iFunID",text:"ID",align:"center",fixed:!1},{field:"cFunName",text:"功能名称",align:"center",fixed:!1},{field:"cFunUrl",text:"功能URl",align:"center",fixed:!1},{field:"cFunIcon",text:"icon名称",align:"center",fixed:!1},{field:"iFunOrder",text:"排序",align:"center",fixed:!1,sortable:!0},{field:"iFunMenuIsShow",text:"是否显示",template:function(e){return"<span class='"+(e.iFunMenuIsShow?"my-show-span":"")+"'>"+(e.iFunMenuIsShow?"显示":"隐藏")+"</span>"},align:"center",fixed:!1},{field:"System_Type",text:"系统类型",formatter:function(e,t,n,i){return u[n]},align:"center",fixed:!1},{field:"FunctionType",text:"点击类型",formatter:function(e,t,n,i){return 1===n?"页面":"按钮"},align:"center",fixed:!1}],c=[{field:"cRoleName",text:"岗位名称",align:"center",fixed:!1},{field:"isSuperAdmin",text:"是否是超级管理员",formatter:function(e,t,n,i){return n?"是":"否"},align:"center",fixed:!1}],d=[{field:"APKNAME",text:"APK名称",align:"center",fixed:!1},{field:"VERSIONID",text:"版本号",align:"center",fixed:!1},{field:"UPLOADTIME",text:"上传时间",align:"center",fixed:!1}],f={props:["tableData","layerListName","loading","dataTotal","pageNumber","pageSize","paginationShow","modularDialog"],data:function(){return{}},computed:{columnList:function(){return i[this.layerListName]}},methods:{handleCurrentChange:function(e){this.$emit("currentChange",e)},onPageChange:function(e){this.$emit("onPageChange",e)},onPageSizeChange:function(e){this.$emit("onPageSizeChange",e)},modularDialogOpen:function(e){this.$emit("modularDialogOpen",e)}}},m=f,p=n("2877"),g=Object(p["a"])(m,a,r,!1,null,null,null);g.options.__file="SysTable.vue";t["a"]=g.exports}}]);
//# sourceMappingURL=chunk-3829aaf0.bd999659.js.map